
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Install Â· Stroom Docs</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="InstallProcessingUserSetupHowTo.html" />
    
    
    <link rel="prev" href="InstallDatabaseHowTo.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">1. Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../release-notes.html">
            
                <a href="../../release-notes.html">
            
                    
                        <b>1.2.</b>
                    
                    Release Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../screenshots.html">
            
                <a href="../../screenshots.html">
            
                    
                        <b>1.3.</b>
                    
                    Screenshots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../quick-start-guide/quick-start.html">
            
                <a href="../../quick-start-guide/quick-start.html">
            
                    
                        <b>1.4.</b>
                    
                    Quick-start guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../quick-start-guide/running/running.html">
            
                <a href="../../quick-start-guide/running/running.html">
            
                    
                        <b>1.4.1.</b>
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../quick-start-guide/feed/feed.html">
            
                <a href="../../quick-start-guide/feed/feed.html">
            
                    
                        <b>1.4.2.</b>
                    
                    Getting data in
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../quick-start-guide/process/process.html">
            
                <a href="../../quick-start-guide/process/process.html">
            
                    
                        <b>1.4.3.</b>
                    
                    Processing the data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../quick-start-guide/index/">
            
                <a href="../../quick-start-guide/index/">
            
                    
                        <b>1.4.4.</b>
                    
                    Indexing the data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../quick-start-guide/dashboard/dashboard.html">
            
                <a href="../../quick-start-guide/dashboard/dashboard.html">
            
                    
                        <b>1.4.5.</b>
                    
                    Visualising the data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">2. Installation</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../install-guide/stroom-app-install.html">
            
                <a href="../../install-guide/stroom-app-install.html">
            
                    
                        <b>2.1.</b>
                    
                    Installing Stroom
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                        <b>2.2.</b>
                    
                    Setup
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../install-guide/setup/apache-forwarding.html">
            
                <a href="../../install-guide/setup/apache-forwarding.html">
            
                    
                        <b>2.2.1.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../install-guide/setup/java-key-store-setup.html">
            
                <a href="../../install-guide/setup/java-key-store-setup.html">
            
                    
                        <b>2.2.2.</b>
                    
                    Java key store setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../../install-guide/setup/mysql-server-setup.html">
            
                <a href="../../install-guide/setup/mysql-server-setup.html">
            
                    
                        <b>2.2.3.</b>
                    
                    MySQL server setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../../install-guide/setup/processing-user-setup.html">
            
                <a href="../../install-guide/setup/processing-user-setup.html">
            
                    
                        <b>2.2.4.</b>
                    
                    Processing user setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../../install-guide/setup/securing-stroom.html">
            
                <a href="../../install-guide/setup/securing-stroom.html">
            
                    
                        <b>2.2.5.</b>
                    
                    Securing Stroom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../install-guide/upgrade-patch.html">
            
                <a href="../../install-guide/upgrade-patch.html">
            
                    
                        <b>2.3.</b>
                    
                    Upgrading and patching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../install-guide/stroom-6-installation.html">
            
                <a href="../../install-guide/stroom-6-installation.html">
            
                    
                        <b>2.4.</b>
                    
                    Stroom 6 installation guide (DRAFT)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">3. User Guide</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../user-guide/nodes.html">
            
                <a href="../../user-guide/nodes.html">
            
                    
                        <b>3.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../user-guide/volumes.html">
            
                <a href="../../user-guide/volumes.html">
            
                    
                        <b>3.2.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../user-guide/tasks.html">
            
                <a href="../../user-guide/tasks.html">
            
                    
                        <b>3.3.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../user-guide/feeds.html">
            
                <a href="../../user-guide/feeds.html">
            
                    
                        <b>3.4.</b>
                    
                    Feeds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../../user-guide/roles.html">
            
                <a href="../../user-guide/roles.html">
            
                    
                        <b>3.5.</b>
                    
                    Roles and permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../../user-guide/sending-data/">
            
                <a href="../../user-guide/sending-data/">
            
                    
                        <b>3.6.</b>
                    
                    Sending data to Stroom
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../../user-guide/sending-data/header-arguments.html">
            
                <a href="../../user-guide/sending-data/header-arguments.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Header Arguments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../../user-guide/sending-data/payloads.html">
            
                <a href="../../user-guide/sending-data/payloads.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Payloads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../../user-guide/sending-data/response-codes.html">
            
                <a href="../../user-guide/sending-data/response-codes.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Response codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../../user-guide/sending-data/example-clients.html">
            
                <a href="../../user-guide/sending-data/example-clients.html">
            
                    
                        <b>3.6.4.</b>
                    
                    Example clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.5" data-path="../../user-guide/sending-data/java-keystores.html">
            
                <a href="../../user-guide/sending-data/java-keystores.html">
            
                    
                        <b>3.6.5.</b>
                    
                    SSL Java keystores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.6" data-path="../../user-guide/sending-data/ssl.html">
            
                <a href="../../user-guide/sending-data/ssl.html">
            
                    
                        <b>3.6.6.</b>
                    
                    SSL configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../../user-guide/pipelines/">
            
                <a href="../../user-guide/pipelines/">
            
                    
                        <b>3.7.</b>
                    
                    Pipelines
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../../user-guide/pipelines/parser/">
            
                <a href="../../user-guide/pipelines/parser/">
            
                    
                        <b>3.7.1.</b>
                    
                    Parser
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1.1" data-path="../../user-guide/pipelines/parser/xml-fragments.html">
            
                <a href="../../user-guide/pipelines/parser/xml-fragments.html">
            
                    
                        <b>3.7.1.1.</b>
                    
                    XML fragments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.1.2" data-path="../../user-guide/pipelines/parser/context-data.html">
            
                <a href="../../user-guide/pipelines/parser/context-data.html">
            
                    
                        <b>3.7.1.2.</b>
                    
                    Context data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../../user-guide/pipelines/xslt/">
            
                <a href="../../user-guide/pipelines/xslt/">
            
                    
                        <b>3.7.2.</b>
                    
                    XSLT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.2.1" data-path="../../user-guide/pipelines/xslt/xslt-includes.html">
            
                <a href="../../user-guide/pipelines/xslt/xslt-includes.html">
            
                    
                        <b>3.7.2.1.</b>
                    
                    XSLT includes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2.2" data-path="../../user-guide/pipelines/xslt/xslt-functions.html">
            
                <a href="../../user-guide/pipelines/xslt/xslt-functions.html">
            
                    
                        <b>3.7.2.2.</b>
                    
                    XSLT functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.3" data-path="../../user-guide/pipelines/file-output.html">
            
                <a href="../../user-guide/pipelines/file-output.html">
            
                    
                        <b>3.7.3.</b>
                    
                    File output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../../user-guide/dashboards/">
            
                <a href="../../user-guide/dashboards/">
            
                    
                        <b>3.8.</b>
                    
                    Dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" data-path="../../user-guide/dashboards/queries.html">
            
                <a href="../../user-guide/dashboards/queries.html">
            
                    
                        <b>3.8.1.</b>
                    
                    Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.2" data-path="../../user-guide/dashboards/dictionaries.html">
            
                <a href="../../user-guide/dashboards/dictionaries.html">
            
                    
                        <b>3.8.2.</b>
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.3" data-path="../../user-guide/dashboards/direct-urls.html">
            
                <a href="../../user-guide/dashboards/direct-urls.html">
            
                    
                        <b>3.8.3.</b>
                    
                    Direct URLs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4" data-path="../../user-guide/dashboards/expressions/">
            
                <a href="../../user-guide/dashboards/expressions/">
            
                    
                        <b>3.8.4.</b>
                    
                    Expressions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.4.1" data-path="../../user-guide/dashboards/expressions/aggregate.html">
            
                <a href="../../user-guide/dashboards/expressions/aggregate.html">
            
                    
                        <b>3.8.4.1.</b>
                    
                    Aggregate Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.2" data-path="../../user-guide/dashboards/expressions/cast.html">
            
                <a href="../../user-guide/dashboards/expressions/cast.html">
            
                    
                        <b>3.8.4.2.</b>
                    
                    Cast Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.3" data-path="../../user-guide/dashboards/expressions/date.html">
            
                <a href="../../user-guide/dashboards/expressions/date.html">
            
                    
                        <b>3.8.4.3.</b>
                    
                    Date Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.4" data-path="../../user-guide/dashboards/expressions/logic.html">
            
                <a href="../../user-guide/dashboards/expressions/logic.html">
            
                    
                        <b>3.8.4.4.</b>
                    
                    Logic Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.5" data-path="../../user-guide/dashboards/expressions/mathematics.html">
            
                <a href="../../user-guide/dashboards/expressions/mathematics.html">
            
                    
                        <b>3.8.4.5.</b>
                    
                    Mathematics Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.6" data-path="../../user-guide/dashboards/expressions/rounding.html">
            
                <a href="../../user-guide/dashboards/expressions/rounding.html">
            
                    
                        <b>3.8.4.6.</b>
                    
                    Rounding Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.7" data-path="../../user-guide/dashboards/expressions/string.html">
            
                <a href="../../user-guide/dashboards/expressions/string.html">
            
                    
                        <b>3.8.4.7.</b>
                    
                    String Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.8" data-path="../../user-guide/dashboards/expressions/type-checking.html">
            
                <a href="../../user-guide/dashboards/expressions/type-checking.html">
            
                    
                        <b>3.8.4.8.</b>
                    
                    Type Checking Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.9" data-path="../../user-guide/dashboards/expressions/uri.html">
            
                <a href="../../user-guide/dashboards/expressions/uri.html">
            
                    
                        <b>3.8.4.9.</b>
                    
                    URI Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.10" data-path="../../user-guide/dashboards/expressions/value.html">
            
                <a href="../../user-guide/dashboards/expressions/value.html">
            
                    
                        <b>3.8.4.10.</b>
                    
                    Value Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../../user-guide/security.html">
            
                <a href="../../user-guide/security.html">
            
                    
                        <b>3.9.</b>
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" >
            
                <span>
            
                    
                        <b>3.10.</b>
                    
                    Data splitter
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1" data-path="../../datasplitter/1-0-introduction.html">
            
                <a href="../../datasplitter/1-0-introduction.html">
            
                    
                        <b>3.10.1.</b>
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1.1" data-path="../../datasplitter/1-1-simple-csv-example.html">
            
                <a href="../../datasplitter/1-1-simple-csv-example.html">
            
                    
                        <b>3.10.1.1.</b>
                    
                    Simple CSV example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.2" data-path="../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                <a href="../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                    
                        <b>3.10.1.2.</b>
                    
                    Simple CSV example with heading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.3" data-path="../../datasplitter/1-3-complex-example.html">
            
                <a href="../../datasplitter/1-3-complex-example.html">
            
                    
                        <b>3.10.1.3.</b>
                    
                    Complex example with regex and user defined names
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.4" data-path="../../datasplitter/1-4-multi-line-example.html">
            
                <a href="../../datasplitter/1-4-multi-line-example.html">
            
                    
                        <b>3.10.1.4.</b>
                    
                    Multi-line example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.2" data-path="../../datasplitter/2-0-element-reference.html">
            
                <a href="../../datasplitter/2-0-element-reference.html">
            
                    
                        <b>3.10.2.</b>
                    
                    Element reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.2.1" data-path="../../datasplitter/2-1-content-providers.html">
            
                <a href="../../datasplitter/2-1-content-providers.html">
            
                    
                        <b>3.10.2.1.</b>
                    
                    Content providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.2" data-path="../../datasplitter/2-2-expressions.html">
            
                <a href="../../datasplitter/2-2-expressions.html">
            
                    
                        <b>3.10.2.2.</b>
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.3" data-path="../../datasplitter/2-3-variables.html">
            
                <a href="../../datasplitter/2-3-variables.html">
            
                    
                        <b>3.10.2.3.</b>
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.4" data-path="../../datasplitter/2-4-output.html">
            
                <a href="../../datasplitter/2-4-output.html">
            
                    
                        <b>3.10.2.4.</b>
                    
                    Output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.3" data-path="../../datasplitter/3-0-match-references.html">
            
                <a href="../../datasplitter/3-0-match-references.html">
            
                    
                        <b>3.10.3.</b>
                    
                    Match references, variables and fixed strings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.3.1" data-path="../../datasplitter/3-1-expression-match-references.html">
            
                <a href="../../datasplitter/3-1-expression-match-references.html">
            
                    
                        <b>3.10.3.1.</b>
                    
                    Expression match references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.2" data-path="../../datasplitter/3-2-variable-reference.html">
            
                <a href="../../datasplitter/3-2-variable-reference.html">
            
                    
                        <b>3.10.3.2.</b>
                    
                    Variable reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.3" data-path="../../datasplitter/3-3-use-of-fixed-strings.html">
            
                <a href="../../datasplitter/3-3-use-of-fixed-strings.html">
            
                    
                        <b>3.10.3.3.</b>
                    
                    Use of fixed strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.4" data-path="../../datasplitter/3-4-concatenation-of-references.html">
            
                <a href="../../datasplitter/3-4-concatenation-of-references.html">
            
                    
                        <b>3.10.3.4.</b>
                    
                    Concatenation of references
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="../../user-guide/api/">
            
                <a href="../../user-guide/api/">
            
                    
                        <b>3.11.</b>
                    
                    Application Programming Interfaces (API)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.11.1" data-path="../../user-guide/api/query-api.html">
            
                <a href="../../user-guide/api/query-api.html">
            
                    
                        <b>3.11.1.</b>
                    
                    Query API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="../../user-guide/tools/">
            
                <a href="../../user-guide/tools/">
            
                    
                        <b>3.12.</b>
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.12.1" data-path="../../user-guide/tools/stream-dump-tool.html">
            
                <a href="../../user-guide/tools/stream-dump-tool.html">
            
                    
                        <b>3.12.1.</b>
                    
                    Stream Dump Tool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">4. HOWTOs</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../StroomHowTos.html">
            
                <a href="../StroomHowTos.html">
            
                    
                        <b>4.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <span>
            
                    
                        <b>4.2.</b>
                    
                    General
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../General/FeedManagementHowTo.html">
            
                <a href="../General/FeedManagementHowTo.html">
            
                    
                        <b>4.2.1.</b>
                    
                    Feed Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../General/TasksHowTo.html">
            
                <a href="../General/TasksHowTo.html">
            
                    
                        <b>4.2.2.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" >
            
                <span>
            
                    
                        <b>4.3.</b>
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.3.1" data-path="../Authentication/UserLogoutHowTo.html">
            
                <a href="../Authentication/UserLogoutHowTo.html">
            
                    
                        <b>4.3.1.</b>
                    
                    User Logout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.2" data-path="../Authentication/UserLoginHowTo.html">
            
                <a href="../Authentication/UserLoginHowTo.html">
            
                    
                        <b>4.3.2.</b>
                    
                    User Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.3" data-path="../Authentication/CreateUserHowTo.html">
            
                <a href="../Authentication/CreateUserHowTo.html">
            
                    
                        <b>4.3.3.</b>
                    
                    Create User
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
                <span>
            
                    
                        <b>4.4.</b>
                    
                    Install
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.4.1" data-path="InstallNodesHowTo.html">
            
                <a href="InstallNodesHowTo.html">
            
                    
                        <b>4.4.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.2" data-path="InstallDatabaseHowTo.html">
            
                <a href="InstallDatabaseHowTo.html">
            
                    
                        <b>4.4.2.</b>
                    
                    Database
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.4.3" data-path="InstallHowTo.html">
            
                <a href="InstallHowTo.html">
            
                    
                        <b>4.4.3.</b>
                    
                    Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.4" data-path="InstallProcessingUserSetupHowTo.html">
            
                <a href="InstallProcessingUserSetupHowTo.html">
            
                    
                        <b>4.4.4.</b>
                    
                    Processing User Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.5" data-path="InstallNFSHowTo.html">
            
                <a href="InstallNFSHowTo.html">
            
                    
                        <b>4.4.5.</b>
                    
                    NFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.6" data-path="InstallTestingHowTo.html">
            
                <a href="InstallTestingHowTo.html">
            
                    
                        <b>4.4.6.</b>
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.7" data-path="InstallProxyHowTo.html">
            
                <a href="InstallProxyHowTo.html">
            
                    
                        <b>4.4.7.</b>
                    
                    Proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.8" data-path="InstallVolumesHowTo.html">
            
                <a href="InstallVolumesHowTo.html">
            
                    
                        <b>4.4.8.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.9" data-path="InstallHttpdHowTo.html">
            
                <a href="InstallHttpdHowTo.html">
            
                    
                        <b>4.4.9.</b>
                    
                    Httpd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.10" data-path="InstallCertificatesHowTo.html">
            
                <a href="InstallCertificatesHowTo.html">
            
                    
                        <b>4.4.10.</b>
                    
                    Certificates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.11" data-path="InstallApplicationHowTo.html">
            
                <a href="InstallApplicationHowTo.html">
            
                    
                        <b>4.4.11.</b>
                    
                    Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.5" >
            
                <span>
            
                    
                        <b>4.5.</b>
                    
                    Event Feeds
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="../EventFeeds/ProcessingHowTo.html">
            
                <a href="../EventFeeds/ProcessingHowTo.html">
            
                    
                        <b>4.5.1.</b>
                    
                    Event Processing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">5. Stroom Proxy</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../proxy/install.html">
            
                <a href="../../proxy/install.html">
            
                    
                        <b>5.1.</b>
                    
                    Installing Stroom proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../proxy/docker.html">
            
                <a href="../../proxy/docker.html">
            
                    
                        <b>5.2.</b>
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../../proxy/apache-forwarding.html">
            
                <a href="../../proxy/apache-forwarding.html">
            
                    
                        <b>5.3.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">6. Developer Guide</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../dev-guide/">
            
                <a href="../../dev-guide/">
            
                    
                        <b>6.1.</b>
                    
                    Developer guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../CONTRIBUTING.html">
            
                <a href="../../CONTRIBUTING.html">
            
                    
                        <b>6.1.1.</b>
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../dev-guide/releasing.html">
            
                <a href="../../dev-guide/releasing.html">
            
                    
                        <b>6.1.2.</b>
                    
                    Releasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../dev-guide/stroom-in-an-ide.html">
            
                <a href="../../dev-guide/stroom-in-an-ide.html">
            
                    
                        <b>6.1.3.</b>
                    
                    Running Stroom from IntelliJ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="../../dev-guide/docker-running.html">
            
                <a href="../../dev-guide/docker-running.html">
            
                    
                        <b>6.1.4.</b>
                    
                    Running Stroom using Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.5" data-path="../../dev-guide/components.html">
            
                <a href="../../dev-guide/components.html">
            
                    
                        <b>6.1.5.</b>
                    
                    Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.6" data-path="../../dev-guide/gitbook.html">
            
                <a href="../../dev-guide/gitbook.html">
            
                    
                        <b>6.1.6.</b>
                    
                    Building GitBook documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">7. About Stroom-docs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../CHANGELOG.html">
            
                <a href="../../CHANGELOG.html">
            
                    
                        <b>7.1.</b>
                    
                    Change log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../VERSION.html">
            
                <a href="../../VERSION.html">
            
                    
                        <b>7.2.</b>
                    
                    Version information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../gitbook.html">
            
                <a href="../../gitbook.html">
            
                    
                        <b>7.3.</b>
                    
                    Building stroom-docs
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Install</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="stroom-howto---installation">Stroom HOWTO - Installation</h1>
<p>This HOWTO is provided to assist users in setting up a number of different Stroom environments based on Centos 7.3 infrastructure.</p>
<h2 id="assumptions">Assumptions</h2>
<p>The following assumptions are used in this document.</p>
<ul>
<li>the user has reasonable RHEL/Centos System administration skills.</li>
<li>installations are on Centos 7.3 minimal systems (fully patched).</li>
<li>the term &apos;node&apos; is used to reference the &apos;host&apos; a service is running on. </li>
<li>the Stroom Proxy and Application software runs as user &apos;stroomuser&apos; and will be deployed in this user&apos;s home directory</li>
<li>data will reside in a directory tree referenced via &apos;/stroomdata&apos;. It is up to the user to provision a filesystem here, noting sub-directories of it will be NFS shared in Multi Node Stroom Deployments</li>
<li>any scripts or commands that should run are in code blocks and are designed to allow the user to cut then paste the commands onto their systems</li>
<li>in this document, when a textual screen capture is documented, data entry is identified by the data surrounded by &apos;<__' '__="">&apos; . This excludes enter/return presses.</__'></li>
<li>better security of password choices, networking, firewalls, data stores, etc. can and should be achieved in various ways, but these HOWTOs are just a quick means of getting a working system, so only limited security is applied</li>
<li>better configuration of the database (e.g. more memory. redundancy) should be considered in production environments</li>
<li>the use of self signed certificates is appropriate for test systems, but users should consider appropriate CA infrastructure in production environments</li>
<li>the user has access to a <a href="https://www.google.com/chrome" title="Google Chrome Web Browser" target="_blank">Chrome</a> web browser as Stroom is optimised for this browser.</li>
</ul>
<h1 id="introduction">Introduction</h1>
<p>This HOWTO provides guidance on a variety of simple Stroom deployments.</p>
<ul>
<li><p><a href="#multi-node-stroom-cluster-proxy-and-application-deployment"><strong>Multi Node Stroom Cluster (Proxy and Application)</strong></a></p>
<p>for an environment where multiple nodes are required to handle the processing load.</p>
</li>
<li><p><a href="#forwarding-stroom-proxy-deployment"><strong>Forwarding Stroom Proxy</strong></a></p>
<p>for extensive networks where one wants to aggregate data through a proxy before sending data to the central Stroom processing systems.</p>
</li>
<li><p><a href="#standalone-stroom-proxy-deployment"><strong>Standalone Stroom Proxy</strong></a></p>
<p>for disconnected networks where collected data can be manually transferred to a Stroom processing service.</p>
</li>
<li><p><a href="#addition-of-a-node-to-a-stroom-cluster-deployment"><strong>Addition of a Node to Stroom Cluster</strong></a></p>
<p>for when one needs to add an additional node to an existing cluster.</p>
</li>
</ul>
<h2 id="nodename-nomenclature">Nodename Nomenclature</h2>
<p>For simplicity sake, the nodenames used in this HOWTO are geared towards the Multi Node Stroom Cluster deployment. That is,</p>
<ul>
<li>the database nodename is <code>stroomdb0.strmdev00.org</code></li>
<li>the processing nodenames are <code>stroomp00.strmdev00.org</code>, <code>stroomp01.strmdev00.org</code>, and <code>stroomp02.strmdev00.org</code></li>
<li>the first node in our cluster, <code>stroomp00.strmdev00.org</code>, also has the CNAME <code>stroomp.strmdev00.org</code></li>
</ul>
<p>In the case of the Proxy only deployments,</p>
<ul>
<li>the forwarding Stroom proxy nodename is <code>stoomfp0.strmdev00.org</code></li>
<li>the standalone nodename will be <code>stroomp00.strmdev00.org</code></li>
</ul>
<h2 id="storage">Storage</h2>
<p>Both the Stroom Proxy and Application store data. The typical requirement is</p>
<ul>
<li>directory for Stroom proxy to store <strong>inbound data</strong> files</li>
<li>directory for Stroom application <strong>permanent data</strong> files (events, etc.)</li>
<li>directory for Stroom application <strong>index data</strong> files</li>
<li>directory for Stroom application <strong>working files</strong> (temporary files, output, etc.)</li>
</ul>
<p>Where multiple processing nodes are involved, the application&apos;s <strong>permanent data</strong> directories need to be accessible by all participating nodes. </p>
<p>Thus a hierarchy for a Stroom Proxy might by</p>
<ul>
<li>/stroomdata/stroom-proxy</li>
</ul>
<p>and for an Application node</p>
<ul>
<li>/stroomdata/stroom-data</li>
<li>/stroomdata/stroom-index</li>
<li>/stroomdata/stroom-working</li>
</ul>
<p>In the following examples, the storage hierarchy proposed will more suited for a multi node Stroom cluster, including the Forwarding or
Standalone proxy deployments. This is to simplify the documentation. Thus, the above structure is generalised into</p>
<ul>
<li>/stroomdata/stroom-working-p<em>nn</em>/proxy</li>
</ul>
<p>and</p>
<ul>
<li>/stroomdata/stroom-data-p<em>nn</em></li>
<li>/stroomdata/stroom-index-p<em>nn</em></li>
<li>/stroomdata/stroom-working-p<em>nn</em></li>
</ul>
<p>where <em>nn</em> is a two digit node number. The reason for placing the proxy directory within the <em>Application</em> working area
will be explained later.</p>
<p>All data should be owned by the Stroom processing user. In this HOWTO, we will use <code>stroomuser</code></p>
<h1 id="multi-node-stroom-cluster-proxy-and-application-deployment">Multi Node Stroom Cluster (Proxy and Application) Deployment</h1>
<p>In this deployment we will install the database on a given node then deploy both the Stroom Proxy and Stroom Application software
to both our processing nodes. At this point we will then integrate a web service to run &apos;in-front&apos; of our Stroom software and
then perform the initial configuration of Stroom via the user interface.</p>
<h2 id="database-installation">Database Installation</h2>
<p>The Stroom capability requires access to two MySQL/MariaDB databases. The first is for persisting application configuration and metadata information, and the second is for the Stroom Statistics capability.
Instructions for installation of the Stroom databases can be found <a href="InstallDatabaseHowTo.html" title="Database Installation">here</a>.
Although these instructions describe the deployment of the databases to their own node, there is no reason why one can&apos;t
just install them both on the first (or only) Stroom node.</p>
<h2 id="prerequisite-software-installation">Prerequisite Software Installation</h2>
<p>Certain software packages are required for either the Stroom Proxy or Stroom Application to run.</p>
<p>The core software list is</p>
<ul>
<li>java-1.8.0-openjdk</li>
<li>java-1.8.0-openjdk-devel</li>
<li>policycoreutils-python</li>
<li>unzip</li>
<li>zip</li>
<li>mariadb or mysql client</li>
</ul>
<p>Most of the required software are packages available via standard repositories and hence we can simply execute</p>
<pre><code class="lang-bash">sudo yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel policycoreutils-python unzip zip
</code></pre>
<p>One has a choice of database clients. MariaDB is directly supported by Centos 7 and is simplest to install. This is done via</p>
<pre><code class="lang-bash">sudo yum -y install mariadb
</code></pre>
<p>One could deploy the MySQL database software as the alternative.</p>
<p><a name="mysqlclientinstall"></a>To do this you need to install the MySQL Community repository files then install the client. 
Instructions for installation of the MySQL Community repository files can be
found <a href="InstallDatabaseHowTo.html#mysql-community-repository-installation" title="MySQL Community Repository Installation">here</a> or on
the <a href="https://dev.mysql.com/downloads/repo/yum" title="Download MySQL Yum Repository" target="_blank">MySQL Site</a>.
Once you have installed the MySQL repository files, install the client via</p>
<pre><code class="lang-bash">sudo yum -y install mysql-community-client
</code></pre>
<p>Note that additional software will be required for other integration components (e.g. Apache httpd/mod_jk). This is
described in the <a href="#web-service-integration" title="Web Service Integration">Web Service Integration</a> section of this document.</p>
<p>Note also, that Standalone or Forwarding Stroom Proxy deployments do <strong>NOT</strong> need a database client deployed.</p>
<h3 id="entropy-issues-in-virtual-environments">Entropy Issues in Virtual environments</h3>
<p>Both the Stroom Application and Stroom Proxy currently run on Tomcat (Version 7) which relies on the Java SecureRandom class to provide
random values for any generated session identifiers as well as other components. In some circumstances the Java runtime can be delayed if the entropy source that is
used to initialise SecureRandom is short of entropy. The delay is caused by the Java runtime waiting on the blocking entropy souce
/dev/random to have sufficient entropy. This quite often occurs in virtual environments were there are few sources that can contribute to 
a system&apos;s entropy.</p>
<p>To view the current available entropy on a Linux system, run the command</p>
<pre><code class="lang-bash">cat /proc/sys/kernel/random/entropy_avail
</code></pre>
<p>A reasonable value would be over 2000 and a poor value would be below a few hundred.</p>
<p>If you are deploying Stroom onto systems with low available entropy, the start time for the Stroom Proxy can be as high as 5 minutes and for
the Application as high as 15 minutes.</p>
<p>One software based solution would be to install the <a href="http://www.issihosts.com/haveged" title="Haveged Web Site" target="_blank">haveged</a> service that attempts to provide an easy-to-use, unpredictable random number generator based upon an adaptation of the HAVEGE algorithm.
To install execute</p>
<pre><code class="lang-bash">yum -y install haveged
systemctl enable haveged
systemctl start haveged
</code></pre>
<p>For background reading in this matter, see <a href="https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged" title="Haveged Entropy Service" target="_blank">this reference</a> or <a href="https://wiki.apache.org/tomcat/HowTo/FasterStartUp#Entropy_Source" title="How do I make Tomcat startup faster?" target="_blank">this reference</a>.</p>
<h2 id="storage-scenario">Storage Scenario</h2>
<p>For the purpose of this Installation HOWTO, the following sets up the storage hierarchy for a two node processing
cluster. To share our <strong>permanent data</strong> we will use NFS. Accept that the NFS deployment described here is very simple, and
in a production deployment, a <em>lot</em> more security controls should be used. Further, </p>
<p>Our hierarchy is</p>
<ul>
<li>Node: <code>stroomp00.strmdev00.org</code><ul>
<li><code>/stroomdata/stroom-data-p00</code>    - location to store Stroom application data files (events, etc.) for this node</li>
<li><code>/stroomdata/stroom-index-p00</code>    - location to store Stroom application index files</li>
<li><code>/stroomdata/stroom-working-p00</code>    - location to store Stroom application working files (e.g. temporary files, output, etc.) for this node</li>
<li><code>/stroomdata/stroom-working-p00/proxy</code>    - location for Stroom proxy to store inbound data files</li>
</ul>
</li>
<li>Node: <code>stroomp01.strmdev00.org</code><ul>
<li><code>/stroomdata/stroom-data-p01</code>    - location to store Stroom application data files (events, etc.) for this node</li>
<li><code>/stroomdata/stroom-index-p01</code>    - location to store Stroom application index files</li>
<li><code>/stroomdata/stroom-working-p01</code>    - location to store Stroom application working files (e.g. temporary files, output, etc.) for this node</li>
<li><code>/stroomdata/stroom-working-p01/proxy</code>    - location for Stroom proxy to store inbound data files</li>
</ul>
</li>
</ul>
<h4 id="creation-of-storage-hierarchy">Creation of Storage Hierarchy</h4>
<p>So, we first create processing user on all nodes as per</p>
<pre><code class="lang-bash">sudo useradd stroomuser
</code></pre>
<p>And the relevant commands to create the above hierarchy would be</p>
<ul>
<li>Node: <code>stroomp00.strmdev00.org</code></li>
</ul>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-data-p00 /stroomdata/stroom-index-p00 /stroomdata/stroom-working-p00 /stroomdata/stroom-working-p00/proxy
sudo mkdir -p /stroomdata/stroom-data-p01  # So that this node can mount stroomp01&apos;s data directory
sudo chown -R stroomuser:stroomuser /stroomdata
sudo chmod -R 750 /stroomdata
</code></pre>
<ul>
<li>Node: <code>stroomp01.strmdev00.org</code></li>
</ul>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-data-p01 /stroomdata/stroom-index-p01 /stroomdata/stroom-working-p01 /stroomdata/stroom-working-p01/proxy
sudo mkdir -p /stroomdata/stroom-data-p00  # So that this node can mount stroomp00&apos;s data directory
sudo chown -R stroomuser:stroomuser /stroomdata
sudo chmod -R 750 /stroomdata
</code></pre>
<h4 id="deployment-of-nfs-to-share-stroom-storage">Deployment of NFS to share Stroom Storage</h4>
<p>We will use NFS to cross mount the <em>permanent data</em> directories. That is</p>
<ul>
<li>node <code>stroomp00.strmdev00.org</code> will mount <code>stroomp01.strmdev00.org:/stroomdata/stroom-data-p01</code> and,</li>
<li>node <code>stroomp01.strmdev00.org</code> will mount <code>stroomp00.strmdev00.org:/stroomdata/stroom-data-p00</code>.</li>
</ul>
<p>The HOWTO guide to deploy and configure NFS for our Scenario is <a href="InstallNFSHowTo.html" title="NFS Installation and Configuration">here</a></p>
<h2 id="stroom-installation">Stroom Installation</h2>
<h3 id="pre-installation-setup">Pre-installation setup</h3>
<p>Before installing either the Stroom Proxy or Stroom Application, we need establish various files and scripts within
the Stroom Processing user&apos;s home directory to support the Stroom services and their persistence. This is setup is described
<a href="InstallProcessingUserSetupHowTo.html" title="Processing User Setup">here</a>.</p>
<h3 id="stroom-proxy-installation">Stroom Proxy Installation</h3>
<p>Instructions for installation of the Stroom Proxy can be found <a href="InstallProxyHowTo.html" title="Installation of Stroom Proxy">here</a>.</p>
<h3 id="stroom-application-installation">Stroom Application Installation</h3>
<p>Instructions for installation of the Stroom application can be found <a href="InstallApplicationHowTo.html" title="Installation of Stroom Application">here</a>.</p>
<h2 id="web-service-integration">Web Service Integration</h2>
<p>One typically &apos;fronts&apos; either a Stroom Proxy or Stroom Application with a secure web service such as Apache&apos;s Httpd or NGINX.
In our scenario, we will use SSL to secure the web service and further, we will use Apache&apos;s Httpd.</p>
<p>We first need to create certificates for use by the web service. The <a href="InstallCertificatesHowTo.html" title="SSL Certificate Generation">following</a>
provides instructions for this. The created certificates can then be used when configuration the web service.</p>
<p>This HOWTO is designed to deploy Apache&apos;s httpd web service as a front end (https) (to the user) and
Apache&apos;s mod_jk as the interface between Apache and the Stroom tomcat applications. The instructions
to configure this can be found <a href="InstallHttpdHowTo.html" title="Apache Httpd/Mod_JK Installation">here</a>.</p>
<p>Other Web service capability can be used, for example, <a href="https://nginx.org" title="NGINX Web Service Capability" target="_blank">NGINX</a>.</p>
<h2 id="installation-validation">Installation Validation</h2>
<p>We will now check that the installation and web services integration has worked.</p>
<h3 id="sanity-firewall-check">Sanity firewall check</h3>
<p>To ensure you have the firewall correctly set up, the following command</p>
<pre><code class="lang-bash">sudo firewall-cmd --reload
sudo firewall-cmd --zone=public --list-all
</code></pre>
<p>should result in</p>
<pre><code>public (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp0s3
  sources: 
  services: dhcpv6-client http https nfs ssh
  ports: 8009/tcp 9080/tcp 8080/tcp 9009/tcp
  protocols: 
  masquerade: no
  forward-ports: 
  sourceports: 
  icmp-blocks: 
  rich rules:
</code></pre><h3 id="test-posting-of-data-to-the-stroom-service">Test Posting of data to the Stroom service</h3>
<p>You can test the data posting service with the command</p>
<pre><code class="lang-bash">curl -k --data-binary @/etc/group &quot;https://stroomp.strmdev00.org/stroom/datafeed&quot; -H &quot;Feed:TEST-FEED-V1_0&quot; -H &quot;System:EXAMPLE_SYSTEM&quot; -H &quot;Environment:EXAMPLE_ENVIRONMENT&quot;
</code></pre>
<p>which <em>*WILL)</em> result in an error as we have not configured the Stroom Application as yet. The error should look like</p>
<pre><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.53 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 406 - Stroom Status 110 - Feed is not set to receive data - &lt;/h1&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Status report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;Stroom Status 110 - Feed is not set to receive data - &lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request &quot;accept&quot; headers.&lt;/u&gt;&lt;/p&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;h3&gt;Apache Tomcat/7.0.53&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre><p>If you view the Stroom proxy log, <code>~/stroom-proxy/instance/logs/stroom.log</code>, on both processing nodes, you will see on one node,
the <em>datafeed.DataFeedRequestHandler</em> events running under, in this case, the <em>ajp-apr-9009-exec-1</em> thread indicating the failure</p>
<pre><code>...
2017-01-03T03:35:47.366Z WARN  [ajp-apr-9009-exec-1] datafeed.DataFeedRequestHandler (DataFeedRequestHandler.java:131) - &quot;handleException()&quot;,&quot;Environment=EXAMPLE_ENVIRONMENT&quot;,&quot;Expect=100-continue&quot;,&quot;Feed=TEST-FEED-V1_0&quot;,&quot;GUID=39960cf9-e50b-4ae8-a5f2-449ee670d2eb&quot;,&quot;ReceivedTime=2017-01-03T03:35:46.915Z&quot;,&quot;RemoteAddress=192.168.2.220&quot;,&quot;RemoteHost=192.168.2.220&quot;,&quot;System=EXAMPLE_SYSTEM&quot;,&quot;accept=*/*&quot;,&quot;content-length=1051&quot;,&quot;content-type=application/x-www-form-urlencoded&quot;,&quot;host=stroomp.strmdev00.org&quot;,&quot;user-agent=curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.21 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2&quot;,&quot;Stroom Status 110 - Feed is not set to receive data&quot;
2017-01-03T03:35:47.367Z ERROR [ajp-apr-9009-exec-1] zip.StroomStreamException (StroomStreamException.java:131) - sendErrorResponse() - 406 Stroom Status 110 - Feed is not set to receive data - 
2017-01-03T03:35:47.368Z INFO  [ajp-apr-9009-exec-1] datafeed.DataFeedRequestHandler$1 (DataFeedRequestHandler.java:104) - &quot;doPost() - Took 478 ms to process (concurrentRequestCount=1) 406&quot;,&quot;Environment=EXAMPLE_ENVIRONMENT&quot;,&quot;Expect=100-continue&quot;,&quot;Feed=TEST-FEED-V1_0&quot;,&quot;GUID=39960cf9-e50b-4ae8-a5f2-449ee670d2eb&quot;,&quot;ReceivedTime=2017-01-03T03:35:46.915Z&quot;,&quot;RemoteAddress=192.168.2.220&quot;,&quot;RemoteHost=192.168.2.220&quot;,&quot;System=EXAMPLE_SYSTEM&quot;,&quot;accept=*/*&quot;,&quot;content-length=1051&quot;,&quot;content-type=application/x-www-form-urlencoded&quot;,&quot;host=stroomp.strmdev00.org&quot;,&quot;user-agent=curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.21 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2&quot;
...
</code></pre><p>Further, if you execute the data posting command (<code>curl</code>) multiple times, you will see the loadbalancer working in that,
the above WARN/ERROR/INFO logs will swap between the proxy services (i.e. first error will be in stroomp00.strmdev00.org&apos;s
proxy log file, then second on stroomp01.strmdev00.org&apos;s proxy log file, then back to stroomp00.strmdev00.org and so on).</p>
<h2 id="stroom-application-configuration">Stroom Application Configuration</h2>
<p>Although we have installed our multi node Stroom cluster, we now need to configure it.
We do this via the user interface (UI).</p>
<h3 id="logging-into-the-stroom-ui-for-the-first-time">Logging into the Stroom UI for the first time</h3>
<p>To log into the UI of your newly installed Stroom instance, present the base URL to your 
<a href="https://www.google.com/chrome" title="Google Chrome Web Browser" target="_blank">Chrome</a> browser. In this deployment, you should enter the URLS
<code>http://stroomp.strmdev00.org</code>, or <code>https://stroomp.strmdev00.org</code> or <code>https://stroomp.strmdev00.org/stroom</code>, noting the first URLs
should automatically direct you to the last URL.</p>
<p>If you have personal certificates loaded in your Chrome browser, you may be asked which certificate to use to authenticate yourself
to <code>stroomp.strmdev00.org:443</code>. As Stroom has not been configured to use user certificates, the choice is not relevant, just choose one
and continue.</p>
<p>Additionally, if you are using  self-signed certificates, your browser will generate an alert as per
<img src="../resources/UI-Chrome-NoCa-00.png" alt="Chrome SelfSigned Certificate Issue - Initial" title="Self Signed Certificate Initial Warning"></p>
<p>To proceed you need to select the <strong>ADVANCED</strong> hyperlink to see</p>
<p><img src="../resources/UI-Chrome-NoCa-01.png" alt="Chrome SelfSigned Certificate Issue - Advanced" title="Self Signed Certificate Advanced Warning"></p>
<p>If you select the <strong>Proceed to stroomp.strmdev00.org (unsafe)</strong> hyper-link you will be presented with the standard Stroom UI login page.</p>
<p><img src="../resources/UI-Login-00.png" alt="Stroom User Interface login page" title="Stroom UI Login Page"></p>
<p>This page has two panels - <strong>About Stroom</strong> and <strong>Login</strong>.</p>
<p>In the <strong>About Stroom</strong> panel we see an introductory description of Stroom in the top left and deployment details in the bottom left of the panel. The deployment details provide</p>
<ul>
<li><code>Build Version:</code> - the build version of the Stroom application deployed</li>
<li><code>Build Date:</code> - the date the version was built</li>
<li><code>Up Date:</code> - the install date</li>
<li><code>Node Name:</code> - the node within the Stroom cluster you have connected to</li>
</ul>
<h3 id="login-with-stroom-default-administrative-user">Login with Stroom default Administrative User</h3>
<p>Each new Stroom deployment automatically creates the administrative user <code>admin</code> and this user&apos;s password is initially set to <code>admin</code>.
We will
<a href="../Authentication/UserLoginHowTo.html" title="Admin first login">login as this user</a>
which also validates that the database and UI is working correctly in that you can login and the password is <code>admin</code>.</p>
<h3 id="create-an-attributed-user-to-perform-configuration">Create an Attributed User to perform configuration</h3>
<p>We should configure Stroom using an <em>attributed user</em> account.
That is, we should
<a href="../Authentication/CreateUserHowTo.html" title="Create Stroom User">create</a>
a user, in our case it will be <code>burn</code> (the author) and once created, we login with that account then perform the initial configuration activities.
You don&apos;t have to do this, but it is sound security practice.</p>
<p>Once you have created the user you should
<a href="../Authentication/UserLogoutHowTo.html" title="User Logout">log out</a>
of the <code>admin</code> account and log back in as our user <code>burn</code>.</p>
<h3 id="configure-the-volumes-for-our-stroom-deployment">Configure the Volumes for our Stroom deployment</h3>
<p>Before we can store data within Stroom we need to configure the
<a href="../../user-guide/volumes.html" title="Stroom Volumes">volumes</a>
we have allocated in our Storage hierarchy. The
<a href="InstallVolumesHowTo.html" title="Initial Volume set-up">Volume Maintenance HOWTO</a>
shows how to do this.</p>
<h3 id="configure-the-nodes-for-our-stroom-deployment">Configure the Nodes for our Stroom deployment</h3>
<p>In a Stroom cluster, nodes are expected to communicate with each other on port 8080 over http. Our
installation in a multi node environment ensures the firewall will allow this but we also need to
configure the nodes. This is achieved via the Stroom UI where we set a Cluster URL for each node.
The following <a href="InstallNodesHowTo.html" title="Initial Node configuration">Node Configuration HOWTO</a> demonstrates how do
set the Cluster URL.</p>
<h3 id="data-stream-processing">Data Stream Processing</h3>
<p>To enable Stroom to process data, it&apos;s
<a href="../../user-guide/tasks.html#stream-processor" title="Stream Processor">Stream Processors</a>
need to be enabled. There are NOT enabled by default on installation. The following
<a href="../General/TasksHowTo.html#enable-stream-processors" title="Enable Stream Processors">section</a>
in our <a href="../General/TasksHowTo.html" title="Stroom Task HOWTO">Stroom Tasks HowTo</a> shows how to do this.</p>
<h2 id="testing-our-stroom-application-and-proxy-installation">Testing our Stroom Application and Proxy Installation</h2>
<p>To complete the installation process we will test that we can send and ingest data.</p>
<h3 id="add-a-test-feed">Add a Test Feed</h3>
<p>In order for Stroom to be able to handle various data sources, be they Apache HTTPD web access logs,
MicroSoft Windows Event logs or Squid Proxy logs, Stroom must be told what the data is when it is received.
This is achieved using
<a href="../../user-guide/feeds.html" title="Stroom Feeds">Event Feeds</a>.
Each feed has a unique name within the system.</p>
<p>To test our installation can accept and ingest data, we will
<a href="../General/FeedManagementHowTo.html#creation-of-an-event-feed" title="Creation of an Event Feed">create a test Event feed</a>. The &apos;name&apos; of the feed will be
<code>TEST-FEED-V1_0</code>. Note that in a production environment is is best that a well defined nomenclature is used for feed &apos;names&apos;. For our
testing purposes <code>TEST-FEED-V1_0</code> is sufficient.</p>
<h3 id="sending-test-data">Sending Test Data</h3>
<p><strong>NOTE:</strong> Before testing our new feed, we should restart both our Stroom application services so that any volume changes are
propagated. This can be achieved by simply running</p>
<pre><code class="lang-bash">sudo -i -u stroomuser
bin/StopServices.sh
bin/StartServices.sh
</code></pre>
<p>on both nodes. It is suggested you first log out of Stroom, if you are currently logged in and you should monitor the Stroom
application logs to ensure it has successfully restarted. Remember to use the <code>T</code> and <code>Tp</code> bash aliases we set up.</p>
<p>For this test, we will send the contents of /etc/group to our test feed. We will also send the file from the cluster&apos;s database
machine. The command to send this file is</p>
<pre><code class="lang-bash">curl -k --data-binary @/etc/group &quot;https://stroomp.strmdev00.org/stroom/datafeed&quot; -H &quot;Feed:TEST-FEED-V1_0&quot; -H &quot;System:EXAMPLE_SYSTEM&quot; -H &quot;Environment:EXAMPLE_ENVIRONMENT&quot;
</code></pre>
<p>We will test a number of features as part of our installation test. These are</p>
<ul>
<li>simple post of data</li>
<li>simple post of data to validate load balancing is working</li>
<li>simple post to <em>direct</em> feed interface</li>
<li>simple post to <em>direct</em> feed interface to validate load balancing is working</li>
<li>identify that the Stroom <em>Proxy Aggregation</em> is working correctly</li>
</ul>
<p>As part of our testing will check the presence of the inbound data, as files, within the proxy storage area.
Now as the proxy storage area is also the location from which the Stroom application
automatically aggregates then ingests the data stored by the proxy, we can either turn off the
<a href="../../user-guide/tasks.html#proxy-aggregation" title="Stream Processor">Proxy Aggregation</a> task,
or attempt to
perform our tests noting that proxy aggregation occurs every 10 minutes by default. For simplicity, we will
<a href="../General/TasksHowTo.html#turn-off-proxy-aggregation" title="Turn off Proxy Aggregation">turn off the <code>Proxy Aggregation</code> task</a>.</p>
<p>We can now perform out tests. Follow the steps in the <a href="InstallTestingHowTo.html#data-post-tests" title="Data Post Tests">Data Posting Tests</a> section
of the <a href="InstallTestingHowTo.html" title="Stroom Installation Testing">Testing Stroom Installation HOWTO</a></p>
<h1 id="forwarding-stroom-proxy-deployment">Forwarding Stroom Proxy Deployment</h1>
<p>In this deployment will install a Stroom <strong>Forwarding Proxy</strong> which is designed to aggregate data posted to it for managed forwarding to 
a central Stroom processing system. This scenario is assuming we are installing on the fully patch Centos 7.3 host, <code>stroomfp0.strmdev00.org</code>.
Further it assumes we have installed, configured and tested the destination Stroom system we will be forwarding to.</p>
<p>We will first deploy the Stroom Proxy then configure it as a <strong>Forwarding Proxy</strong> then integrate a web service to run &apos;in-front&apos; of
Proxy.</p>
<h2 id="prerequisite-software-installation-for-forwarding-proxy">Prerequisite Software Installation for Forwarding Proxy</h2>
<p>Certain software packages are required for the Stroom Proxy to run.</p>
<p>The core software list is</p>
<ul>
<li>java-1.8.0-openjdk</li>
<li>java-1.8.0-openjdk-devel</li>
<li>policycoreutils-python</li>
<li>unzip</li>
<li>zip</li>
</ul>
<p>Most of the required software are packages available via standard repositories and hence we can simply execute</p>
<pre><code class="lang-bash">sudo yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel policycoreutils-python unzip zip
</code></pre>
<p>Note that additional software will be required for other integration components (e.g. Apache httpd/mod_jk). This is
described in the
<a href="#web-service-integration-forwarding-proxy" title="Web Service Integration - Forwarding proxy">Web Service Integration for Forwarding Proxy</a>
section of this document.</p>
<h2 id="forwarding-proxy-storage">Forwarding Proxy Storage</h2>
<p>Since we are a proxy that stores data sent to it and forwards it each minute we have only one directory.</p>
<ul>
<li><code>/stroomdata/stroom-working-fp0/proxy</code>    - location for Stroom proxy to store inbound data files prior to forwarding</li>
</ul>
<p>You will note that these HOWTOs use a consistent storage nomenclature for simplicity of documentations.</p>
<h3 id="creation-of-storage-for-forwarding-proxy">Creation of Storage for Forwarding Proxy</h3>
<p>We create the processing user, as per</p>
<pre><code class="lang-bash">sudo useradd stroomuser
</code></pre>
<p>then create the storage hierarchy with the commands</p>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-working-fp0/proxy
sudo chown -R stroomuser:stroomuser /stroomdata
sudo chmod -R 750 /stroomdata
</code></pre>
<h2 id="stroom-forwarding-proxy-installation">Stroom Forwarding Proxy Installation</h2>
<h3 id="pre-installation-setup">Pre-installation setup</h3>
<p>Before installing the Stroom Forwarding Proxy, we need establish various files and scripts within
the Stroom Processing user&apos;s home directory to support the Stroom services and their persistence. This is setup is described
<a href="InstallProcessingUserSetupHowTo.html" title="Processing User Setup">here</a>. Although this setup HOWTO is orientated towards a complete Stroom Proxy
and Application installation, it does provide all the processing user setup requirements for a Stroom Proxy as well.</p>
<h3 id="stroom-forwarding-proxy-installation">Stroom Forwarding Proxy Installation</h3>
<p>Instructions for installation of the Stroom Proxy can be found <a href="InstallProxyHowTo.html" title="Installation of Stroom Proxy">here</a>, noting you
should follow the steps for configuring the proxy as a <em>Forwarding</em> proxy.</p>
<h2 id="web-service-integration-for-forwarding-proxy">Web Service Integration for Forwarding Proxy</h2>
<p>One typically &apos;fronts&apos; a Stroom Proxy with a secure web service such as Apache&apos;s Httpd or NGINX.
In our scenario, we will use SSL to secure the web service and further, we will use Apache&apos;s Httpd.</p>
<p>We first need to create certificates for use by the web service. The
<a href="InstallCertificatesHowTo.html" title="SSL Certificate Generation">SSL Certificate Generation HOWTO</a> provides instructions for this. 
The created certificates can then be used when configuration the web service. NOTE also, that for a forwarding
proxy we will need to establish Key and Trust stores as well. This is also documented in the SSL Certificate Generation HOWTO
<a href="InstallCertificatesHowTo.html#stroom-proxy-to-proxy-key-and-trust-stores" title="Key and Trust Store Generation">here</a></p>
<p>This HOWTO is designed to deploy Apache&apos;s httpd web service as a front end (https) (to the user) and
Apache&apos;s mod_jk as the interface between Apache and the Stroom tomcat applications. The instructions
to configure this can be found <a href="InstallHttpdHowTo.html" title="Apache Httpd/Mod_JK Installation">here</a>. Please take note of where a Stroom Proxy
configuration item is different to that of a Stroom Application processing node.</p>
<p>Other Web service capability can be used, for example, <a href="https://nginx.org" title="NGINX Web Service Capability" target="_blank">NGINX</a>.</p>
<h2 id="testing-our-forwarding-proxy-installation">Testing our Forwarding Proxy Installation</h2>
<p>To complete the installation process we will test that we can send data to the forwarding proxy and that it forwards the files
it receives to the central Stroom processing system. As stated earlier, it is assumed we have installed, configured and tested the destination
central Stroom processing system and thus we will have a test <a href="../../user-guide/feeds.html" title="Stroom Feeds">Feed</a>
already established - <code>TEST-FEED-V1_0</code>.</p>
<h3 id="sending-test-data">Sending Test Data</h3>
<p>For this test, we will send the contents of /etc/group to our test feed - <code>TEST-FEED-V1_0</code>. It doesn&apos;t matter from which host we send the file from.
The command to send file is</p>
<pre><code class="lang-bash">curl -k --data-binary @/etc/group &quot;https://stroomfp0.strmdev00.org/stroom/datafeed&quot; -H &quot;Feed:TEST-FEED-V1_0&quot; -H &quot;System:EXAMPLE_SYSTEM&quot; -H &quot;Environment:EXAMPLE_ENVIRONMENT&quot;
</code></pre>
<p>Before testing, it is recommended you set up to monitor the Stroom proxy logs on the central server as well as on the Forwarding Proxy server.</p>
<p>Follow the steps in the <a href="InstallTestingHowTo.html#stroom-forwarding-proxy-testing" title="Stroom Proxy Data Post Tests">Forwarding Proxy Data Posting Tests</a> section
of the <a href="InstallTestingHowTo.html" title="Stroom Installation Testing">Testing Stroom Installation HOWTO</a></p>
<h1 id="standalone-stroom-proxy-deployment">Standalone Stroom Proxy Deployment</h1>
<p>In this deployment will install a Stroom <strong>Standalone Proxy</strong> which is designed to accept and store data posted to it for <strong>manual</strong> forwarding to 
a central Stroom processing system. This scenario is assuming we are installing on the fully patch Centos 7.3 host, <code>stroomsap0.strmdev00.org</code>.</p>
<p>We will first deploy the Stroom Proxy then configure it as a <strong>Standalone Proxy</strong> then integrate a web service to run &apos;in-front&apos; of
Proxy.</p>
<h2 id="prerequisite-software-installation-for-forwarding-proxy">Prerequisite Software Installation for Forwarding Proxy</h2>
<p>Certain software packages are required for the Stroom Proxy to run.</p>
<p>The core software list is</p>
<ul>
<li>java-1.8.0-openjdk</li>
<li>java-1.8.0-openjdk-devel</li>
<li>policycoreutils-python</li>
<li>unzip</li>
<li>zip</li>
</ul>
<p>Most of the required software are packages available via standard repositories and hence we can simply execute</p>
<pre><code class="lang-bash">sudo yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel policycoreutils-python unzip zip
</code></pre>
<p>Note that additional software will be required for other integration components (e.g. Apache httpd/mod_jk). This is
described in the
<a href="#web-service-integration-for-standalone-proxy" title="Web Service Integration - Standalone proxy">Web Service Integration for Standalone Proxy</a>
section of this document.</p>
<h2 id="standalone-proxy-storage">Standalone Proxy Storage</h2>
<p>Since we are a proxy that stores data sent to it we have only one directory.</p>
<ul>
<li><code>/stroomdata/stroom-working-sap0/proxy</code>    - location for Stroom proxy to store inbound data files</li>
</ul>
<p>You will note that these HOWTOs use a consistent storage nomenclature for simplicity of documentations.</p>
<h3 id="creation-of-storage-for-standalone-proxy">Creation of Storage for Standalone Proxy</h3>
<p>We create the processing user, as per</p>
<pre><code class="lang-bash">sudo useradd stroomuser
</code></pre>
<p>then create the storage hierarchy with the commands</p>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-working-sap0/proxy
sudo chown -R stroomuser:stroomuser /stroomdata
sudo chmod -R 750 /stroomdata
</code></pre>
<h2 id="stroom-standalone-proxy-installation">Stroom Standalone Proxy Installation</h2>
<h3 id="pre-installation-setup">Pre-installation setup</h3>
<p>Before installing the Stroom Standalone Proxy, we need establish various files and scripts within
the Stroom Processing user&apos;s home directory to support the Stroom services and their persistence. This is setup is described
<a href="InstallProcessingUserSetupHowTo.html" title="Processing User Setup">here</a>. Although this setup HOWTO is orientated towards a complete Stroom Proxy
and Application installation, it does provide all the processing user setup requirements for a Stroom Proxy as well.</p>
<h3 id="stroom-standalone-proxy-installation">Stroom Standalone Proxy Installation</h3>
<p>Instructions for installation of the Stroom Proxy can be found <a href="InstallProxyHowTo.html" title="Installation of Stroom Proxy">here</a>, noting you
should follow the steps for configuring the proxy as a  <em>Store_NoDB</em> proxy.</p>
<h2 id="web-service-integration-for-standalone-proxy">Web Service Integration for Standalone Proxy</h2>
<p>One typically &apos;fronts&apos; a Stroom Proxy with a secure web service such as Apache&apos;s Httpd or NGINX.
In our scenario, we will use SSL to secure the web service and further, we will use Apache&apos;s Httpd.</p>
<p>We first need to create certificates for use by the web service. The
<a href="InstallCertificatesHowTo.html" title="SSL Certificate Generation">SSL Certificate Generation HOWTO</a> provides instructions for this. 
The created certificates can then be used when configuration the web service. There is no need for Trust or Key stores.</p>
<p>This HOWTO is designed to deploy Apache&apos;s httpd web service as a front end (https) (to the user) and
Apache&apos;s mod_jk as the interface between Apache and the Stroom tomcat applications. The instructions
to configure this can be found <a href="InstallHttpdHowTo.html" title="Apache Httpd/Mod_JK Installation">here</a>. Please take note of where a Stroom Proxy
configuration item is different to that of a Stroom Application processing node.</p>
<p>Other Web service capability can be used, for example, <a href="https://nginx.org" title="NGINX Web Service Capability" target="_blank">NGINX</a>.</p>
<h2 id="testing-our-standalone-proxy-installation">Testing our Standalone Proxy Installation</h2>
<p>To complete the installation process we will test that we can send data to the standalone proxy and it stores it.</p>
<h3 id="sending-test-data">Sending Test Data</h3>
<p>For this test, we will send the contents of /etc/group to our test feed - <code>TEST-FEED-V1_0</code>. It doesn&apos;t matter from which host we send the file from.
The command to send file is</p>
<pre><code class="lang-bash">curl -k --data-binary @/etc/group &quot;https://stroomsap0.strmdev00.org/stroom/datafeed&quot; -H &quot;Feed:TEST-FEED-V1_0&quot; -H &quot;System:EXAMPLE_SYSTEM&quot; -H &quot;Environment:EXAMPLE_ENVIRONMENT&quot;
</code></pre>
<p>Before testing, it is recommended you set up to monitor the Standalone Proxy logs.</p>
<p>Follow the steps in the <a href="InstallTestingHowTo.html#stroom-standalone-proxy-testing" title="Stroom Proxy Data Post Tests">Standalone Proxy Data Posting Tests</a>
section of the <a href="InstallTestingHowTo.html" title="Stroom Installation Testing">Testing Stroom Installation HOWTO</a></p>
<h1 id="addition-of-a-node-to-a-stroom-cluster-deployment">Addition of a Node to a Stroom Cluster Deployment</h1>
<p>In this deployment we will deploy both the Stroom Proxy and Stroom Application software
to a new processing node we wish to add to our cluster. Once we have deploy and configured the Stroom software, we will then integrate a web
service to run &apos;in-front&apos; of our Stroom software, and then perform the initial configuration of to add this node via the user interface. The
node we will add is <code>stroomp02.strmdev00.org</code>.</p>
<h2 id="grant-access-to-the-database-for-this-node">Grant access to the database for this node</h2>
<p>Connect to the Stroom database as the administrative (root) user, via the command</p>
<pre><code class="lang-bash">sudo mysql --user=root -p
</code></pre>
<p>and at the <code>MariaDB [(none)]&gt;</code> or <code>mysql&gt;</code> prompt enter</p>
<pre><code class="lang-bash">grant all privileges on stroom.* to stroomuser@stroomp02.strmdev00.org identified by &apos;Stroompassword1@&apos;;
quit;
</code></pre>
<h2 id="prerequisite-software-installation">Prerequisite Software Installation</h2>
<p>Certain software packages are required for either the Stroom Proxy or Stroom Application to run.</p>
<p>The core software list is</p>
<ul>
<li>java-1.8.0-openjdk</li>
<li>java-1.8.0-openjdk-devel</li>
<li>policycoreutils-python</li>
<li>unzip</li>
<li>zip</li>
<li>mariadb or mysql client</li>
</ul>
<p>Most of the required software are packages available via standard repositories and hence we can simply execute</p>
<pre><code class="lang-bash">sudo yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel policycoreutils-python unzip zip
sudo yum -y install mariadb
</code></pre>
<p>In the above instance, the database client choice is MariaDB as it is directly supported by Centos 7. One could deploy the MySQL
database software as the alternative. If you have chosen a different database for the already deployed Stroom Cluster then you
should use that one. See <a href="#mysqlclientinstall">earlier</a> in this document on how to install the MySQL Community client.</p>
<p>Note that additional software will be required for other integration components (e.g. Apache httpd/mod_jk). This is
described in the <a href="#web-service-integration" title="Web Service Integration">Web Service Integration</a> section of this document.</p>
<h3 id="storage-scenario">Storage Scenario</h3>
<p>To maintain our Storage Scenario them, the scenario for this node is</p>
<ul>
<li>Node: <code>stroomp02.strmdev00.org</code><ul>
<li><code>/stroomdata/stroom-data-p02</code>        - location to store Stroom application data files (events, etc.) for this node</li>
<li><code>/stroomdata/stroom-index-p02</code>       - location to store Stroom application index files</li>
<li><code>/stroomdata/stroom-working-p02</code>     - location to store Stroom application working files (e.g. tmp, output, etc.) for this node</li>
<li><code>/stroomdata/stroom-working-p02/proxy</code>       - location for Stroom proxy to store inbound data files</li>
</ul>
</li>
</ul>
<h4 id="creation-of-storage-hierarchy">Creation of Storage Hierarchy</h4>
<p>So, we first create processing user on our new node as per</p>
<pre><code class="lang-bash">sudo useradd stroomuser
</code></pre>
<p>then create the storage via</p>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-data-p02 /stroomdata/stroom-index-p02 /stroomdata/stroom-working-p02 /stroomdata/stroom-working-p02/proxy
sudo mkdir -p /stroomdata/stroom-data-p00  # So that this node can mount stroomp00&apos;s data directory
sudo mkdir -p /stroomdata/stroom-data-p01  # So that this node can mount stroomp01&apos;s data directory
sudo chown -R stroomuser:stroomuser /stroomdata
sudo chmod -R 750 /stroomdata
</code></pre>
<p>As we need to share this new nodes <strong>permanent data</strong> directories to the existing nodes in the Cluster, we need to
create mount point directories on our existing nodes in addition to deploying NFS.</p>
<p>So we execute on</p>
<ul>
<li>Node: <code>stroomp00.strmdev00.org</code></li>
</ul>
<pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-data-p02
sudo chmod 750 /stroomdata/stroom-data-p02
sudo chown stroomuser:stroomuser /stroomdata/stroom-data-p02
</code></pre>
<p>and on </p>
<ul>
<li>Node: <code>stroomp01.strmdev00.org</code><pre><code class="lang-bash">sudo mkdir -p /stroomdata/stroom-data-p02
sudo chmod 750 /stroomdata/stroom-data-p02
sudo chown stroomuser:stroomuser /stroomdata/stroom-data-p02
</code></pre>
<h4 id="deployment-of-nfs-to-share-stroom-storage">Deployment of NFS to share Stroom Storage</h4>
</li>
</ul>
<p>We will use NFS to cross mount the <em>permanent data</em> directories. That is</p>
<ul>
<li>node <code>stroomp00.strmdev00.org</code> will mount<ul>
<li><code>stroomp01.strmdev00.org:/stroomdata/stroom-data-p01</code> and,</li>
<li><code>stroomp02.strmdev00.org:/stroomdata/stroom-data-p02</code> and,</li>
</ul>
</li>
<li>node <code>stroomp01.strmdev00.org</code> will mount<ul>
<li><code>stroomp00.strmdev00.org:/stroomdata/stroom-data-p00</code> and</li>
<li><code>stroomp02.strmdev00.org:/stroomdata/stroom-data-p02</code></li>
</ul>
</li>
<li>node <code>stroomp02.strmdev00.org</code> will mount<ul>
<li><code>stroomp00.strmdev00.org:/stroomdata/stroom-data-p00</code> and</li>
<li><code>stroomp01.strmdev00.org:/stroomdata/stroom-data-p01</code></li>
</ul>
</li>
</ul>
<p>The HOWTO guide to deploy and configure NFS for our Scenario is <a href="InstallNFSHowTo.html#addition-of-another-node" title="NFS Installation and Configuration">here</a>.</p>
<h2 id="stroom-installation">Stroom Installation</h2>
<h3 id="pre-installation-setup">Pre-installation setup</h3>
<p>Before installing either the Stroom Proxy or Stroom Application, we need establish various files and scripts within
the Stroom Processing user&apos;s home directory to support the Stroom services and their persistence. This is setup is described
<a href="InstallProcessingUserSetupHowTo.html" title="Processing User Setup">here</a>. Note you should remember to set the <strong>N</strong> bash variable 
when generating the Environment Variable files to <em>02</em>.</p>
<h3 id="stroom-proxy-installation">Stroom Proxy Installation</h3>
<p>Instructions for installation of the Stroom Proxy can be found <a href="InstallProxyHowTo.html" title="Installation of Stroom Proxy">here</a>. Note you
will be deploying a <em>Store</em> proxy and during the setup execution ensure you enter the appropriate values for NODE (&apos;stroomp02&apos;)
and REPO_DIR (&apos;/stroomdata/stroom-working-p02/proxy&apos;). All other values will be the same.</p>
<h3 id="stroom-application-installation">Stroom Application Installation</h3>
<p>Instructions for installation of the Stroom application can be found <a href="InstallApplicationHowTo.html" title="Installation of Stroom Application">here</a>.
When executing the setup script ensure you enter the appropriate values for TEMP_DIR (&apos;/stroomdata/stroom-working-p02&apos;) and NODE (&apos;stroomp02&apos;).
All other values will be the same. Note also that you will not have to wait for the &apos;first&apos; node to initialise the Stroom database as
this would have already been done when you first deployed your Stroom Cluster.</p>
<h2 id="web-service-integration">Web Service Integration</h2>
<p>One typically &apos;fronts&apos; either a Stroom Proxy or Stroom Application with a secure web service such as Apache&apos;s Httpd or NGINX.
In our scenario, we will use SSL to secure the web service and further, we will use Apache&apos;s Httpd.</p>
<p>As we are a cluster, we use the same certificate as the other nodes. Thus we need to gain the certificate package from an existing node.</p>
<p>So, on <code>stroomp00.strmdev00.org</code>, we replicate the directory ~stroomuser/stroom-jks to our new node. That is, tar it up, copy the tar file to
stroomp02 and untar it. We can make use of the other node&apos;s mounted file system.</p>
<pre><code class="lang-bash">sudo -i -u stroomuser
cd ~stroomuser
tar cf stroom-jks.tar stroom-jks
mv stroom-jks.tar /stroomdata/stroom-data-p02
</code></pre>
<p>then on our new node (<code>stroomp02.strmdev00.org</code>) we extract the data.</p>
<pre><code class="lang-bash">sudo -i -u stroomuser
cd ~stroomuser
tar xf /stroomdata/stroom-data-p02/stroom-jks.tar &amp;&amp; rm -f /stroomdata/stroom-data-p02/stroom-jks.tar
</code></pre>
<p>Now ensure protection, ownership and SELinux context for these files by running</p>
<pre><code class="lang-bash">chmod 700 ~stroomuser/stroom-jks/private ~stroomuser/stroom-jks
chown -R stroomuser:stroomuser ~stroomuser/stroom-jks
chcon -R --reference /etc/pki ~stroomuser/stroom-jks
</code></pre>
<p>This HOWTO is designed to deploy Apache&apos;s httpd web service as a front end (https) (to the user) and
Apache&apos;s mod_jk as the interface between Apache and the Stroom tomcat applications. The instructions
to configure this can be found <a href="InstallHttpdHowTo.html" title="Apache Httpd/Mod_JK Installation">here</a>.
You should pay particular attention to the section on the
<a href="InstallHttpdHowTo.html#apache-mod_jk-configuration" title="Apache Mod_JK Configuration">Apache Mod_JK configuration</a>
as you <strong>MUST</strong> regenerate the Mod_JK workers.properties file on the existing cluster nodes as well as generating it on our new node.</p>
<p>Other Web service capability can be used, for example, <a href="https://nginx.org" title="NGINX Web Service Capability" target="_blank">NGINX</a>.</p>
<p>Note that once you have integrated the web services for our new node, you will need to restart the Apache systemd process on the existing
two nodes that that the new Mod_JK configuration has taken place.</p>
<h2 id="installation-validation">Installation Validation</h2>
<p>We will now check that the installation and web services integration has worked. We do this with a simple firewall check
and <a href="#testing-our-new-node-installation" title="Integration Tests">later</a> perform complete integration tests.</p>
<h3 id="sanity-firewall-check">Sanity firewall check</h3>
<p>To ensure you have the firewall correctly set up, the following command</p>
<pre><code class="lang-bash">sudo firewall-cmd --reload
sudo firewall-cmd --zone=public --list-all
</code></pre>
<p>should result in</p>
<pre><code>public (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp0s3
  sources: 
  services: dhcpv6-client http https nfs ssh
  ports: 8009/tcp 9080/tcp 8080/tcp 9009/tcp
  protocols: 
  masquerade: no
  forward-ports: 
  sourceports: 
  icmp-blocks: 
  rich rules:
</code></pre><h2 id="stroom-application-configuration---new-node">Stroom Application Configuration - New Node</h2>
<p>We will need to configure this new node&apos;s Volumes, set it&apos;s Cluster URL and enable it&apos;s Stream Processors.
We do this by logging into the Stroom User Interface (UI) with an account with Administrator privileges. It
is recommended you use a attributed user for this activity. Once you have logged in you can configure this
new node.</p>
<h3 id="configure-the-volumes-for-our-stroom-deployment">Configure the Volumes for our Stroom deployment</h3>
<p>Before we can store data on this new Stroom node we need to configure it&apos;s
<a href="../../user-guide/volumes.html" title="Stroom Volumes">volumes</a>
we have allocated in our Storage hierarchy. The section on adding new volumes in the
<a href="InstallVolumesHowTo.html#adding-new-volumes" title="Add new volumes to a Cluster">Volume Maintenance HOWTO</a>
shows how to do this.</p>
<h3 id="configure-the-nodes-for-our-stroom-deployment">Configure the Nodes for our Stroom deployment</h3>
<p>In a Stroom cluster, nodes are expected to communicate with each other on port 8080 over http. Our
installation in a multi node environment ensures the firewall will allow this but we also need to
configure the new node. This is achieved via the Stroom UI where we set a Cluster URL for our node.
The section on Configuring a new node in the 
<a href="InstallNodesHowTo.html#configure-new-node" title="Configure a new Node">Node Configuration HOWTO</a> demonstrates how do
set the Cluster URL.</p>
<h3 id="data-stream-processing">Data Stream Processing</h3>
<p>To enable Stroom to process data, it&apos;s
<a href="../../user-guide/tasks.html#stream-processor" title="Stream Processor">Stream Processors</a>
need to be enabled. There are NOT enabled by default on installation. The following
<a href="../General/TasksHowTo.html#enable-stream-processors-on-new-node" title="Enable Stream Processors">section</a>
in our <a href="../General/TasksHowTo.html" title="Stroom Task HOWTO">Stroom Tasks HowTo</a> shows how to do this.</p>
<h2 id="testing-our-new-node-installation">Testing our New Node Installation</h2>
<p>To complete the installation process we will test that our new node has successfully integrated into our cluster.</p>
<p>First we need to ensure we have restarted the Apache Httpd service (httpd.service) on the original nodes so that the new workers.properties
configuration files take effect.</p>
<p>We now test the node integration by running the tests we use to validate a Multi Node Stroom Cluster Deployment found
<a href="#sending-test-data">here</a> noting we should
monitor all three nodes proxy and application log files. Basically we are looking to see that this new node participates in the
load balancing for the <code>stroomp.strmdev00.org</code> cluster.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="InstallDatabaseHowTo.html" class="navigation navigation-prev " aria-label="Previous page: Database">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="InstallProcessingUserSetupHowTo.html" class="navigation navigation-next " aria-label="Next page: Processing User Setup">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Install","level":"4.4.3","depth":2,"next":{"title":"Processing User Setup","level":"4.4.4","depth":2,"path":"HOWTOs/Install/InstallProcessingUserSetupHowTo.md","ref":"HOWTOs/Install/InstallProcessingUserSetupHowTo.md","articles":[]},"previous":{"title":"Database","level":"4.4.2","depth":2,"path":"HOWTOs/Install/InstallDatabaseHowTo.md","ref":"HOWTOs/Install/InstallDatabaseHowTo.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/gchq/stroom-docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Stroom Docs","gitbook":"3.x.x"},"file":{"path":"HOWTOs/Install/InstallHowTo.md","mtime":"2019-05-13T09:32:55.684Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-13T09:34:10.933Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

