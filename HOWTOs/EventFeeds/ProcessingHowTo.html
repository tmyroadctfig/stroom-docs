
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Event Processing Â· Stroom Docs</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../proxy/install.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">1. Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../release-notes.html">
            
                <a href="../../release-notes.html">
            
                    
                        <b>1.2.</b>
                    
                    Release Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../screenshots.html">
            
                <a href="../../screenshots.html">
            
                    
                        <b>1.3.</b>
                    
                    Screenshots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../quick-start-guide/quick-start.html">
            
                <a href="../../quick-start-guide/quick-start.html">
            
                    
                        <b>1.4.</b>
                    
                    Quick-start guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../quick-start-guide/running/running.html">
            
                <a href="../../quick-start-guide/running/running.html">
            
                    
                        <b>1.4.1.</b>
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../quick-start-guide/feed/feed.html">
            
                <a href="../../quick-start-guide/feed/feed.html">
            
                    
                        <b>1.4.2.</b>
                    
                    Getting data in
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../quick-start-guide/process/process.html">
            
                <a href="../../quick-start-guide/process/process.html">
            
                    
                        <b>1.4.3.</b>
                    
                    Processing the data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../quick-start-guide/index/">
            
                <a href="../../quick-start-guide/index/">
            
                    
                        <b>1.4.4.</b>
                    
                    Indexing the data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../quick-start-guide/dashboard/dashboard.html">
            
                <a href="../../quick-start-guide/dashboard/dashboard.html">
            
                    
                        <b>1.4.5.</b>
                    
                    Visualising the data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">2. Installation</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../install-guide/stroom-app-install.html">
            
                <a href="../../install-guide/stroom-app-install.html">
            
                    
                        <b>2.1.</b>
                    
                    Installing Stroom
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                        <b>2.2.</b>
                    
                    Setup
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../install-guide/setup/apache-forwarding.html">
            
                <a href="../../install-guide/setup/apache-forwarding.html">
            
                    
                        <b>2.2.1.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../install-guide/setup/java-key-store-setup.html">
            
                <a href="../../install-guide/setup/java-key-store-setup.html">
            
                    
                        <b>2.2.2.</b>
                    
                    Java key store setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../../install-guide/setup/mysql-server-setup.html">
            
                <a href="../../install-guide/setup/mysql-server-setup.html">
            
                    
                        <b>2.2.3.</b>
                    
                    MySQL server setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../../install-guide/setup/processing-user-setup.html">
            
                <a href="../../install-guide/setup/processing-user-setup.html">
            
                    
                        <b>2.2.4.</b>
                    
                    Processing user setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../../install-guide/setup/securing-stroom.html">
            
                <a href="../../install-guide/setup/securing-stroom.html">
            
                    
                        <b>2.2.5.</b>
                    
                    Securing Stroom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../install-guide/upgrade-patch.html">
            
                <a href="../../install-guide/upgrade-patch.html">
            
                    
                        <b>2.3.</b>
                    
                    Upgrading and patching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../install-guide/stroom-6-installation.html">
            
                <a href="../../install-guide/stroom-6-installation.html">
            
                    
                        <b>2.4.</b>
                    
                    Stroom 6 installation guide (DRAFT)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">3. User Guide</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../user-guide/nodes.html">
            
                <a href="../../user-guide/nodes.html">
            
                    
                        <b>3.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../user-guide/volumes.html">
            
                <a href="../../user-guide/volumes.html">
            
                    
                        <b>3.2.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../user-guide/tasks.html">
            
                <a href="../../user-guide/tasks.html">
            
                    
                        <b>3.3.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../user-guide/feeds.html">
            
                <a href="../../user-guide/feeds.html">
            
                    
                        <b>3.4.</b>
                    
                    Feeds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../../user-guide/roles.html">
            
                <a href="../../user-guide/roles.html">
            
                    
                        <b>3.5.</b>
                    
                    Roles and permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../../user-guide/sending-data/">
            
                <a href="../../user-guide/sending-data/">
            
                    
                        <b>3.6.</b>
                    
                    Sending data to Stroom
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../../user-guide/sending-data/header-arguments.html">
            
                <a href="../../user-guide/sending-data/header-arguments.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Header Arguments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../../user-guide/sending-data/payloads.html">
            
                <a href="../../user-guide/sending-data/payloads.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Payloads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../../user-guide/sending-data/response-codes.html">
            
                <a href="../../user-guide/sending-data/response-codes.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Response codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../../user-guide/sending-data/example-clients.html">
            
                <a href="../../user-guide/sending-data/example-clients.html">
            
                    
                        <b>3.6.4.</b>
                    
                    Example clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.5" data-path="../../user-guide/sending-data/java-keystores.html">
            
                <a href="../../user-guide/sending-data/java-keystores.html">
            
                    
                        <b>3.6.5.</b>
                    
                    SSL Java keystores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.6" data-path="../../user-guide/sending-data/ssl.html">
            
                <a href="../../user-guide/sending-data/ssl.html">
            
                    
                        <b>3.6.6.</b>
                    
                    SSL configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../../user-guide/pipelines/">
            
                <a href="../../user-guide/pipelines/">
            
                    
                        <b>3.7.</b>
                    
                    Pipelines
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../../user-guide/pipelines/parser/">
            
                <a href="../../user-guide/pipelines/parser/">
            
                    
                        <b>3.7.1.</b>
                    
                    Parser
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1.1" data-path="../../user-guide/pipelines/parser/xml-fragments.html">
            
                <a href="../../user-guide/pipelines/parser/xml-fragments.html">
            
                    
                        <b>3.7.1.1.</b>
                    
                    XML fragments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.1.2" data-path="../../user-guide/pipelines/parser/context-data.html">
            
                <a href="../../user-guide/pipelines/parser/context-data.html">
            
                    
                        <b>3.7.1.2.</b>
                    
                    Context data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../../user-guide/pipelines/xslt/">
            
                <a href="../../user-guide/pipelines/xslt/">
            
                    
                        <b>3.7.2.</b>
                    
                    XSLT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.2.1" data-path="../../user-guide/pipelines/xslt/xslt-includes.html">
            
                <a href="../../user-guide/pipelines/xslt/xslt-includes.html">
            
                    
                        <b>3.7.2.1.</b>
                    
                    XSLT includes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2.2" data-path="../../user-guide/pipelines/xslt/xslt-functions.html">
            
                <a href="../../user-guide/pipelines/xslt/xslt-functions.html">
            
                    
                        <b>3.7.2.2.</b>
                    
                    XSLT functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.3" data-path="../../user-guide/pipelines/file-output.html">
            
                <a href="../../user-guide/pipelines/file-output.html">
            
                    
                        <b>3.7.3.</b>
                    
                    File output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../../user-guide/dashboards/">
            
                <a href="../../user-guide/dashboards/">
            
                    
                        <b>3.8.</b>
                    
                    Dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" data-path="../../user-guide/dashboards/queries.html">
            
                <a href="../../user-guide/dashboards/queries.html">
            
                    
                        <b>3.8.1.</b>
                    
                    Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.2" data-path="../../user-guide/dashboards/dictionaries.html">
            
                <a href="../../user-guide/dashboards/dictionaries.html">
            
                    
                        <b>3.8.2.</b>
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.3" data-path="../../user-guide/dashboards/direct-urls.html">
            
                <a href="../../user-guide/dashboards/direct-urls.html">
            
                    
                        <b>3.8.3.</b>
                    
                    Direct URLs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4" data-path="../../user-guide/dashboards/expressions/">
            
                <a href="../../user-guide/dashboards/expressions/">
            
                    
                        <b>3.8.4.</b>
                    
                    Expressions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.4.1" data-path="../../user-guide/dashboards/expressions/aggregate.html">
            
                <a href="../../user-guide/dashboards/expressions/aggregate.html">
            
                    
                        <b>3.8.4.1.</b>
                    
                    Aggregate Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.2" data-path="../../user-guide/dashboards/expressions/cast.html">
            
                <a href="../../user-guide/dashboards/expressions/cast.html">
            
                    
                        <b>3.8.4.2.</b>
                    
                    Cast Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.3" data-path="../../user-guide/dashboards/expressions/date.html">
            
                <a href="../../user-guide/dashboards/expressions/date.html">
            
                    
                        <b>3.8.4.3.</b>
                    
                    Date Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.4" data-path="../../user-guide/dashboards/expressions/logic.html">
            
                <a href="../../user-guide/dashboards/expressions/logic.html">
            
                    
                        <b>3.8.4.4.</b>
                    
                    Logic Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.5" data-path="../../user-guide/dashboards/expressions/mathematics.html">
            
                <a href="../../user-guide/dashboards/expressions/mathematics.html">
            
                    
                        <b>3.8.4.5.</b>
                    
                    Mathematics Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.6" data-path="../../user-guide/dashboards/expressions/rounding.html">
            
                <a href="../../user-guide/dashboards/expressions/rounding.html">
            
                    
                        <b>3.8.4.6.</b>
                    
                    Rounding Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.7" data-path="../../user-guide/dashboards/expressions/string.html">
            
                <a href="../../user-guide/dashboards/expressions/string.html">
            
                    
                        <b>3.8.4.7.</b>
                    
                    String Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.8" data-path="../../user-guide/dashboards/expressions/type-checking.html">
            
                <a href="../../user-guide/dashboards/expressions/type-checking.html">
            
                    
                        <b>3.8.4.8.</b>
                    
                    Type Checking Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.9" data-path="../../user-guide/dashboards/expressions/uri.html">
            
                <a href="../../user-guide/dashboards/expressions/uri.html">
            
                    
                        <b>3.8.4.9.</b>
                    
                    URI Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.4.10" data-path="../../user-guide/dashboards/expressions/value.html">
            
                <a href="../../user-guide/dashboards/expressions/value.html">
            
                    
                        <b>3.8.4.10.</b>
                    
                    Value Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../../user-guide/security.html">
            
                <a href="../../user-guide/security.html">
            
                    
                        <b>3.9.</b>
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" >
            
                <span>
            
                    
                        <b>3.10.</b>
                    
                    Data splitter
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1" data-path="../../datasplitter/1-0-introduction.html">
            
                <a href="../../datasplitter/1-0-introduction.html">
            
                    
                        <b>3.10.1.</b>
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1.1" data-path="../../datasplitter/1-1-simple-csv-example.html">
            
                <a href="../../datasplitter/1-1-simple-csv-example.html">
            
                    
                        <b>3.10.1.1.</b>
                    
                    Simple CSV example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.2" data-path="../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                <a href="../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                    
                        <b>3.10.1.2.</b>
                    
                    Simple CSV example with heading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.3" data-path="../../datasplitter/1-3-complex-example.html">
            
                <a href="../../datasplitter/1-3-complex-example.html">
            
                    
                        <b>3.10.1.3.</b>
                    
                    Complex example with regex and user defined names
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.4" data-path="../../datasplitter/1-4-multi-line-example.html">
            
                <a href="../../datasplitter/1-4-multi-line-example.html">
            
                    
                        <b>3.10.1.4.</b>
                    
                    Multi-line example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.2" data-path="../../datasplitter/2-0-element-reference.html">
            
                <a href="../../datasplitter/2-0-element-reference.html">
            
                    
                        <b>3.10.2.</b>
                    
                    Element reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.2.1" data-path="../../datasplitter/2-1-content-providers.html">
            
                <a href="../../datasplitter/2-1-content-providers.html">
            
                    
                        <b>3.10.2.1.</b>
                    
                    Content providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.2" data-path="../../datasplitter/2-2-expressions.html">
            
                <a href="../../datasplitter/2-2-expressions.html">
            
                    
                        <b>3.10.2.2.</b>
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.3" data-path="../../datasplitter/2-3-variables.html">
            
                <a href="../../datasplitter/2-3-variables.html">
            
                    
                        <b>3.10.2.3.</b>
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.4" data-path="../../datasplitter/2-4-output.html">
            
                <a href="../../datasplitter/2-4-output.html">
            
                    
                        <b>3.10.2.4.</b>
                    
                    Output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.3" data-path="../../datasplitter/3-0-match-references.html">
            
                <a href="../../datasplitter/3-0-match-references.html">
            
                    
                        <b>3.10.3.</b>
                    
                    Match references, variables and fixed strings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.3.1" data-path="../../datasplitter/3-1-expression-match-references.html">
            
                <a href="../../datasplitter/3-1-expression-match-references.html">
            
                    
                        <b>3.10.3.1.</b>
                    
                    Expression match references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.2" data-path="../../datasplitter/3-2-variable-reference.html">
            
                <a href="../../datasplitter/3-2-variable-reference.html">
            
                    
                        <b>3.10.3.2.</b>
                    
                    Variable reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.3" data-path="../../datasplitter/3-3-use-of-fixed-strings.html">
            
                <a href="../../datasplitter/3-3-use-of-fixed-strings.html">
            
                    
                        <b>3.10.3.3.</b>
                    
                    Use of fixed strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.4" data-path="../../datasplitter/3-4-concatenation-of-references.html">
            
                <a href="../../datasplitter/3-4-concatenation-of-references.html">
            
                    
                        <b>3.10.3.4.</b>
                    
                    Concatenation of references
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="../../user-guide/api/">
            
                <a href="../../user-guide/api/">
            
                    
                        <b>3.11.</b>
                    
                    Application Programming Interfaces (API)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.11.1" data-path="../../user-guide/api/query-api.html">
            
                <a href="../../user-guide/api/query-api.html">
            
                    
                        <b>3.11.1.</b>
                    
                    Query API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="../../user-guide/tools/">
            
                <a href="../../user-guide/tools/">
            
                    
                        <b>3.12.</b>
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.12.1" data-path="../../user-guide/tools/stream-dump-tool.html">
            
                <a href="../../user-guide/tools/stream-dump-tool.html">
            
                    
                        <b>3.12.1.</b>
                    
                    Stream Dump Tool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">4. HOWTOs</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../StroomHowTos.html">
            
                <a href="../StroomHowTos.html">
            
                    
                        <b>4.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <span>
            
                    
                        <b>4.2.</b>
                    
                    General
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../General/FeedManagementHowTo.html">
            
                <a href="../General/FeedManagementHowTo.html">
            
                    
                        <b>4.2.1.</b>
                    
                    Feed Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../General/TasksHowTo.html">
            
                <a href="../General/TasksHowTo.html">
            
                    
                        <b>4.2.2.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" >
            
                <span>
            
                    
                        <b>4.3.</b>
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.3.1" data-path="../Authentication/UserLogoutHowTo.html">
            
                <a href="../Authentication/UserLogoutHowTo.html">
            
                    
                        <b>4.3.1.</b>
                    
                    User Logout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.2" data-path="../Authentication/UserLoginHowTo.html">
            
                <a href="../Authentication/UserLoginHowTo.html">
            
                    
                        <b>4.3.2.</b>
                    
                    User Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.3" data-path="../Authentication/CreateUserHowTo.html">
            
                <a href="../Authentication/CreateUserHowTo.html">
            
                    
                        <b>4.3.3.</b>
                    
                    Create User
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
                <span>
            
                    
                        <b>4.4.</b>
                    
                    Install
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.4.1" data-path="../Install/InstallNodesHowTo.html">
            
                <a href="../Install/InstallNodesHowTo.html">
            
                    
                        <b>4.4.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.2" data-path="../Install/InstallDatabaseHowTo.html">
            
                <a href="../Install/InstallDatabaseHowTo.html">
            
                    
                        <b>4.4.2.</b>
                    
                    Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.3" data-path="../Install/InstallHowTo.html">
            
                <a href="../Install/InstallHowTo.html">
            
                    
                        <b>4.4.3.</b>
                    
                    Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.4" data-path="../Install/InstallProcessingUserSetupHowTo.html">
            
                <a href="../Install/InstallProcessingUserSetupHowTo.html">
            
                    
                        <b>4.4.4.</b>
                    
                    Processing User Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.5" data-path="../Install/InstallNFSHowTo.html">
            
                <a href="../Install/InstallNFSHowTo.html">
            
                    
                        <b>4.4.5.</b>
                    
                    NFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.6" data-path="../Install/InstallTestingHowTo.html">
            
                <a href="../Install/InstallTestingHowTo.html">
            
                    
                        <b>4.4.6.</b>
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.7" data-path="../Install/InstallProxyHowTo.html">
            
                <a href="../Install/InstallProxyHowTo.html">
            
                    
                        <b>4.4.7.</b>
                    
                    Proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.8" data-path="../Install/InstallVolumesHowTo.html">
            
                <a href="../Install/InstallVolumesHowTo.html">
            
                    
                        <b>4.4.8.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.9" data-path="../Install/InstallHttpdHowTo.html">
            
                <a href="../Install/InstallHttpdHowTo.html">
            
                    
                        <b>4.4.9.</b>
                    
                    Httpd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.10" data-path="../Install/InstallCertificatesHowTo.html">
            
                <a href="../Install/InstallCertificatesHowTo.html">
            
                    
                        <b>4.4.10.</b>
                    
                    Certificates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.11" data-path="../Install/InstallApplicationHowTo.html">
            
                <a href="../Install/InstallApplicationHowTo.html">
            
                    
                        <b>4.4.11.</b>
                    
                    Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.5" >
            
                <span>
            
                    
                        <b>4.5.</b>
                    
                    Event Feeds
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="4.5.1" data-path="ProcessingHowTo.html">
            
                <a href="ProcessingHowTo.html">
            
                    
                        <b>4.5.1.</b>
                    
                    Event Processing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">5. Stroom Proxy</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../proxy/install.html">
            
                <a href="../../proxy/install.html">
            
                    
                        <b>5.1.</b>
                    
                    Installing Stroom proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../proxy/docker.html">
            
                <a href="../../proxy/docker.html">
            
                    
                        <b>5.2.</b>
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../../proxy/apache-forwarding.html">
            
                <a href="../../proxy/apache-forwarding.html">
            
                    
                        <b>5.3.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">6. Developer Guide</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../dev-guide/">
            
                <a href="../../dev-guide/">
            
                    
                        <b>6.1.</b>
                    
                    Developer guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../CONTRIBUTING.html">
            
                <a href="../../CONTRIBUTING.html">
            
                    
                        <b>6.1.1.</b>
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../dev-guide/releasing.html">
            
                <a href="../../dev-guide/releasing.html">
            
                    
                        <b>6.1.2.</b>
                    
                    Releasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../dev-guide/stroom-in-an-ide.html">
            
                <a href="../../dev-guide/stroom-in-an-ide.html">
            
                    
                        <b>6.1.3.</b>
                    
                    Running Stroom from IntelliJ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="../../dev-guide/docker-running.html">
            
                <a href="../../dev-guide/docker-running.html">
            
                    
                        <b>6.1.4.</b>
                    
                    Running Stroom using Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.5" data-path="../../dev-guide/components.html">
            
                <a href="../../dev-guide/components.html">
            
                    
                        <b>6.1.5.</b>
                    
                    Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.6" data-path="../../dev-guide/gitbook.html">
            
                <a href="../../dev-guide/gitbook.html">
            
                    
                        <b>6.1.6.</b>
                    
                    Building GitBook documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">7. About Stroom-docs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../CHANGELOG.html">
            
                <a href="../../CHANGELOG.html">
            
                    
                        <b>7.1.</b>
                    
                    Change log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../VERSION.html">
            
                <a href="../../VERSION.html">
            
                    
                        <b>7.2.</b>
                    
                    Version information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../gitbook.html">
            
                <a href="../../gitbook.html">
            
                    
                        <b>7.3.</b>
                    
                    Building stroom-docs
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Event Processing</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="stroom-howto---eventprocessing">Stroom HOWTO - EventProcessing</h1>
<p>This HOWTO is provided to assist users in setting up Stroom to process inbound raw event logs and transform them into the Stroom Event Logging XML Schema.</p>
<h2 id="assumptions">Assumptions</h2>
<p>The following assumptions are used in this document.</p>
<ul>
<li>the user successfully deployed Stroom </li>
<li>the following Stroom content packages have been installed<ul>
<li>Template Pipelines</li>
<li>XML Schemas</li>
</ul>
</li>
</ul>
<h1 id="introduction">Introduction</h1>
<p>This HOWTO will demonstrate the process by which an Event Processing pipeline for a given Event Source is developed and deployed.</p>
<p>The sample event source used will be based on BlueCoat Proxy logs. An extract of BlueCoat logs were sourced from <a href="http://log-sharing.dreamhosters.com" target="_blank">http://log-sharing.dreamhosters.com</a> (a Public Security Log Sharing Site) but modified to add sample user attribution.</p>
<p>Template pipelines are being used to simplify the establishment of this processing pipeline.</p>
<p>The sample BlueCoat Proxy log will be transformed into an intermediate simple XML key value pair structure, then into the <a href="https://github.com/gchq/event-logging-schema" target="_blank">Stroom Event Logging XML Schema</a> format.</p>
<h2 id="event-source">Event Source</h2>
<p>As mentioned, we will use BlueCoat Proxy logs as a sample event source. Although BlueCoat logs can be customised, the default is to use the W2C Extended Log File Format (ELF). Our sample data set looks like</p>
<pre><code>#Software: SGOS 3.2.4.28
#Version: 1.0
#Date: 2005-04-27 20:57:09
#Fields: date time time-taken c-ip sc-status s-action sc-bytes cs-bytes cs-method cs-uri-scheme cs-host cs-uri-path cs-uri-query cs-username s-hierarchy s-supplier-name rs(Content-Type) cs(User-Agent) sc-filter-result sc-filter-category x-virus-id s-ip s-sitename x-virus-details x-icap-error-code x-icap-error-details
2005-05-04 17:16:12 1 45.110.2.82 200 TCP_HIT 941 729 GET http www.inmobus.com /wcm/assets/images/imagefileicon.gif - george DIRECT 38.112.92.20 image/gif &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)&quot; PROXIED none - 192.16.170.42 SG-HTTP-Service - none -
2005-05-04 17:16:12 2 45.110.2.82 200 TCP_HIT 941 729 GET http www.inmobus.com /wcm/assets/images/imagefileicon.gif - george DIRECT 38.112.92.20 image/gif &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)&quot; PROXIED none - 192.16.170.42 SG-HTTP-Service - none -
...
</code></pre><p>A copy of this sample data source can be found <a href="sampleBluecoat.log" title="Sample BlueCoat logs">here</a>.</p>
<h2 id="establish-the-processing-pipeline">Establish the Processing Pipeline</h2>
<p>We will create the components that make up the processing pipeline for transforming these raw logs into the Stroom Event Logging XML Schema.
They will be placed a folder appropriately named <strong>BlueCoat</strong> in the path <strong>System/Event Sources/Proxy</strong>. See <a href="../General/FeedManagementHowTo.html#create-folder-for-specific-event-source" title="Folder creation">Folder Creation</a> for details on creating such a folder.</p>
<p>There will be four components</p>
<ul>
<li>the Event Feed to group the BlueCoat log files</li>
<li>the Text Converter to convert the BlueCoat raw logs files into simple XML</li>
<li>the XSLT Translation to translate the simple XML formed by the Text Converter into the Stroom Event Logging XML form, and</li>
<li>the Processing pipeline which manages how the processing is performed.</li>
</ul>
<p>All components will have the same Name <strong>BlueCoat-Proxy-V1.0-EVENTS</strong>.</p>
<h3 id="create-the-event-feed">Create the Event Feed</h3>
<p>We first select (with a <em>left click</em>) the <strong>System/Event Sources/Proxy/BlueCoat</strong> folder in the <code>Explorer</code> tab then <em>right click</em> to bring up the <code>New Item</code> selection sub-menu.</p>
<p><img src="../resources/UI-CreateFeed-01.png" alt="Stroom New Item"></p>
<p>As we are creating an Event Feed, select the <img src="../resources/icons/feedItem.png" alt="Stroom UI FeedItem" title="Stroom UI FeedItem"> item to have the <code>New Feed</code> configuration window into which we enter <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> into the <code>Name:</code> entry box</p>
<p><img src="../resources/UI-FeedProcessing-00.png" alt="Stroom UI Create Feed - New Feed Configuration name" title="Stroom UI Create Feed - New feed configuration window enter name"></p>
<p>and press <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> to see the new Event Feed tab</p>
<p><img src="../resources/UI-FeedProcessing-01.png" alt="Stroom UI Create Feed - New Feed Tab" title="Stroom UI Create Feed - New feed tab"></p>
<p>and it&apos;s corresponding reference in the <code>Explorer</code> display.</p>
<p>The configuration items for a Event Feed are</p>
<ul>
<li>Description - a description of the feed</li>
<li>Classification - the classification or sensitivity of the Event Feed data</li>
<li>Reference Feed Flag - to indicate if this is a <code>Reference Feed</code> or not</li>
<li>Feed Status - which indicates if we accept data, reject it or silently drop it</li>
<li>Stream Type - to indicate if the <code>Feed</code> contains raw log data or reference data</li>
<li>Data Encoding - the character encoding of the data being sent to the <code>Feed</code></li>
<li>Context Encoding - the character encoding of context data associated with this <code>Feed</code></li>
<li>Retention Period - the amount of time to retain the Event data</li>
</ul>
<p>In our example, we will set the above to</p>
<ul>
<li>Description - <em>BlueCoat Proxy log data sent in W2C Extended Log File Format (ELFF)</em></li>
<li>Classification - We will leave this blank</li>
<li>Reference Feed Flag - We leave the check-box unchecked as this is not a <em>Reference Feed</em></li>
<li>Feed Status - We set to <em>Receive</em></li>
<li>Stream Type - We set to <em>Raw Events</em> as we will be sending batches (streams) of raw event logs</li>
<li>Data Encoding - We leave at the default of <em>UTF-8</em> as this is the proposed character encoding</li>
<li>Context Encoding - We leave at the default of <em>UTF-8</em> as there are no Context Events for this Feed</li>
<li>Retention Period - We leave at <em>Forever</em> was we do not want to delete any collected BlueCoat event data.</li>
</ul>
<p><img src="../resources/UI-FeedProcessing-02.png" alt="Stroom UI Create Feed - New Feed Tab Configuration" title="Stroom UI Create Feed - New feed tab configuration"></p>
<p>One should note that the <code>Feed</code> tab as been marked as having unsaved changes. This is indicated by the asterisk
character <code>*</code> between the <em>Feed</em> icon <img src="../resources/icons/feed.png" alt="Feed" title="Feed"> and the name of the feed <strong>BlueCoat-Proxy-V1.0-EVENTS</strong>.
We can save the changes to our feed by pressing the <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save"> in
the top left of the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> tab. At this point one should notice two things, the first is that the asterisk
has disappeared from the <code>Feed</code> tab and the the second is that the <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save"> is now <em>ghosted</em> - <img src="../resources/icons/ghostedSave.png" alt="ghostedSave" title="Ghosted Save">.</p>
<p><img src="../resources/UI-FeedProcessing-03.png" alt="Stroom UI Create Feed - New Feed Tab Saved" title="Stroom UI Create Feed - New feed tab saved"></p>
<h3 id="create-the-text-converter">Create the Text Converter</h3>
<p>We now create the Text Converter for this <code>Feed</code> in a similar fashion to the <code>Event Feed</code>.
We first select (with a <em>left click</em>) the <strong>System/Event Sources/Proxy/BlueCoat</strong> folder in the <code>Explorer</code> tab then <em>right click</em> to bring up the <code>New Item</code> selection sub-menu. As we are creating a Text Converter, select the <img src="../resources/icons/textConverterItem.png" alt="Stroom UI textConverterItem" title="Stroom UI TextConverterItem"> item to have the <code>New Text Converter</code> configuration window.</p>
<p>Enter <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> into the <code>Name:</code> entry box and press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> which results in the creation of the Text Converter tab</p>
<p><img src="../resources/UI-FeedProcessing-04.png" alt="Stroom UI Create Feed - New TextConverter Tab" title="Stroom UI Create Feed - New TextConverter tab"></p>
<p>and it&apos;s corresponding reference in the <code>Explorer</code> display.</p>
<p>We set the configuration for this <code>Text Converter</code> to be</p>
<ul>
<li>Description - <em>Simple XML transform for BlueCoat Proxy log data sent in W2C Extended Log File Format (ELFF)</em></li>
<li>Converter Type - We set to <em>Data Splitter</em> was we will be using the Stroom Data Splitter facility to convert the raw log data into simple XML.</li>
</ul>
<p>Again, press the <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save"> to save the configuration items.</p>
<h3 id="create-the-xslt-translation">Create the XSLT Translation</h3>
<p>We now create the XSLT translation for this <code>Feed</code> in a similar fashion to the <code>Event Feed</code> or <code>Text Converter</code>.
We first select (with a <em>left click</em>) the <strong>System/Event Sources/Proxy/BlueCoat</strong> folder in the <code>Explorer</code> tab then <em>right click</em> to bring up the <code>New Item</code> selection sub-menu. As we are creating a XSLT Translation, select the <img src="../resources/icons/xsltItem.png" alt="Stroom UI xsltItem" title="Stroom UI xsltItem"> item to have the <code>New XSLT</code> configuration window.</p>
<p>Enter <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> into the <code>Name:</code> entry box and press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> which results in the creation of the XSLT Translation tab</p>
<p><img src="../resources/UI-FeedProcessing-05.png" alt="Stroom UI Create Feed - New Translation Tab" title="Stroom UI Create Feed - New Translation tab"></p>
<p>and it&apos;s corresponding reference in the <code>Explorer</code> display.</p>
<p>We set the configuration for this <code>XSLT Translation</code> to be</p>
<ul>
<li>Description - <em>Transform simple XML of BlueCoat Proxy log data into Stroom Event Logging XML form</em></li>
</ul>
<h3 id="create-the-pipeline">Create the Pipeline</h3>
<p>We now create the Pipeline for this <code>Feed</code> in a similar fashion to the <code>Event Feed</code>, <code>Text Converter</code> or <code>XSLT Translation</code>.
We first select (with a <em>left click</em>) the <strong>System/Event Sources/Proxy/BlueCoat</strong> folder in the <code>Explorer</code> tab then <em>right click</em> to bring up the <code>New Item</code> selection sub-menu. As we are creating a Pipeline, select the <img src="../resources/icons/pipeLineItem.png" alt="Stroom UI pipeLineItem" title="Stroom UI pipeLineItem"> item to have the <code>New Pipeline</code> configuration window.</p>
<p>Enter <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> into the <code>Name:</code> entry box and press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> which results in the creation of the Pipeline tab</p>
<p><img src="../resources/UI-FeedProcessing-06.png" alt="Stroom UI Create Feed - New Pipeline Tab" title="Stroom UI Create Feed - New Pipeline tab"></p>
<p>and it&apos;s corresponding reference in the <code>Explorer</code> display.</p>
<p>We set the configuration for this <code>Pipeline</code> to be</p>
<ul>
<li>Description - <em>Processing of XML of BlueCoat Proxy log data into Stroom Event Logging XML</em></li>
<li>Type - We leave as <em>Event Data</em> as this is an <em>Event Data</em> pipeline</li>
</ul>
<h4 id="configure-pipeline-structure">Configure Pipeline Structure</h4>
<p>We now need to configure the <em>Structure</em> of this <code>Pipeline</code>.</p>
<p>We do this by selecting the <code>Structure</code> hyper-link of the <em>*BlueCoat-Proxy-V1.0-EVENTS</em> <code>Pipeline</code> tab.</p>
<p>At this we see the <code>Pipeline Structure</code> configuration tab</p>
<p><img src="../resources/UI-FeedProcessing-07.png" alt="Stroom UI Create Feed - Pipeline Structure" title="Stroom UI Create Feed - Pipeline Structure tab"></p>
<p>As noted in the Assumptions at the start, we have loaded the <strong>Template Pipeline</strong> content pack, so that we can <em>Inherit</em> a pipeline structure from this content pack and configure it to support this specific feed.</p>
<p>We find a template by selecting the <strong>Inherit From:</strong> entry box labeled <img src="../resources/icons/noneEntryBox.png" alt="Stroom UI noneEntryBox" title="Stroom UI NoneEntryBox"> to reveal a <strong>Choose Item</strong> configuration item window.</p>
<p><img src="../resources/UI-FeedProcessing-08.png" alt="Stroom UI Create Feed - Pipeline Structure - Inherit" title="Stroom UI Create Feed - Pipeline Structure tab - Inherit"></p>
<p>Select the <strong>Template Pipelines</strong> folder by pressing the <img src="../resources/icons/openFolder.png" alt="Stroom UI openFolder" title="Stroom UI Open Folder"> icon to the left of the folder to reveal the choice of available templates.</p>
<p><img src="../resources/UI-FeedProcessing-09.png" alt="Stroom UI Create Feed - Pipeline Structure - Templates" title="Stroom UI Create Feed - Pipeline Structure tab - Templates"></p>
<p>For our BlueCoat feed we will select the <code>Event Data (Text)</code> template. This is done by moving the cursor to the relevant line and select via a <em>left click</em></p>
<p><img src="../resources/UI-FeedProcessing-10.png" alt="Stroom UI Create Feed - Pipeline Structure - Template Selection" title="Stroom UI Create Feed - Pipeline Structure tab - Template Selection"></p>
<p>then pressing <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> to see the inherited pipeline structure</p>
<p><img src="../resources/UI-FeedProcessing-11.png" alt="Stroom UI Create Feed - Pipeline Structure - Template Selected" title="Stroom UI Create Feed - Pipeline Structure tab - Template Selected"></p>
<h4 id="configure-pipeline-elements">Configure Pipeline Elements</h4>
<p>For the purpose of this HOWTO, we are only interested in two of the eleven (11) elements in this pipeline</p>
<ul>
<li>the Text Converter labeled <em>dsParser</em></li>
<li>the XSLT Translation labeled <em>translationFilter</em></li>
</ul>
<p>We need to assign our BlueCoat-Proxy-V1.0-EVENTS Text Converter and XSLT Translation to these elements respectively.</p>
<h5 id="text-converter-configuration">Text Converter Configuration</h5>
<p>We do this by first selecting (<em>left click</em>) the <em>dsParser</em> element at which we see the <em>Property</em> sub-window displayed</p>
<p><img src="../resources/UI-FeedProcessing-12.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser"></p>
<p>We then select (<em>left click</em>) the <em>textConverter</em> <strong>Property Name</strong></p>
<p><img src="../resources/UI-FeedProcessing-13.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser selected Property" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser selected Property"></p>
<p>then press the <code>Edit Property</code> button <img src="../resources/icons/edit.png" alt="Stroom UI EditProperty" title="Stroom UI EditButton">.  At this, the <code>Edit Property</code> configuration window is displayed.</p>
<p><img src="../resources/UI-FeedProcessing-14.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser edit Property" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser Edit Property"></p>
<p>We select the <strong>Value:</strong> entry box labeled <img src="../resources/icons/noneEntryBox.png" alt="Stroom UI noneEntryBox" title="Stroom UI NoneEntryBox"> to reveal a <strong>Choose Item</strong> configuration item window.</p>
<p><img src="../resources/UI-FeedProcessing-15.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser edit Property choose item" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser Edit Property choose item"></p>
<p>We traverse the folder structure until we can select the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>Text Converter</code> as per</p>
<p><img src="../resources/UI-FeedProcessing-16.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser edit Property chosen item" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser Edit Property chosen item"></p>
<p>and then press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> to see that the Property <strong>Value:</strong> has been selected.</p>
<p><img src="../resources/UI-FeedProcessing-17.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser set Property chosen item" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser set Property chosen item"></p>
<p>and pressing the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button of the <code>Edit Property</code> configuration window results in the pipelines <code>dsParser</code> property being set. </p>
<p><img src="../resources/UI-FeedProcessing-18.png" alt="Stroom UI Create Feed - Pipeline Structure - dsParser set Property" title="Stroom UI Create Feed - Pipeline Structure tab - dsParser set Property"></p>
<h5 id="xslt-translation-configuration">XSLT Translation Configuration</h5>
<p>We do this by first selecting (<em>left click</em>) the <em>translationFilter</em> element at which we see the <em>Property</em> sub-window displayed</p>
<p><img src="../resources/UI-FeedProcessing-19.png" alt="Stroom UI Create Feed - Pipeline Structure - translationFilter" title="Stroom UI Create Feed - Pipeline Structure tab - translationFilter"></p>
<p>We then select (<em>left click</em>) the <em>xslt</em> <strong>Property Name</strong></p>
<p><img src="../resources/UI-FeedProcessing-20.png" alt="Stroom UI Create Feed - Pipeline Structure - xslt selected Property" title="Stroom UI Create Feed - Pipeline Structure tab - xslt selected Property"></p>
<p>and following the same steps as for the Text Converter property selection, we assign the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>XSLT Translation</code> to the <code>xslt</code> property.</p>
<p><img src="../resources/UI-FeedProcessing-21.png" alt="Stroom UI Create Feed - Pipeline Structure - xslt selected Property" title="Stroom UI Create Feed - Pipeline Structure tab - xslt selected Property"></p>
<p>At this point, we save these changes by pressing the <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save">.</p>
<h2 id="authoring-the-translation">Authoring the Translation</h2>
<p>We are now ready to author the translation. Close all tabs except for the <strong>Welcome</strong> and <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>Feed</code> tabs.</p>
<p>On the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>Feed</code> tab, select the <strong>Data</strong> hyper-link to be presented with the <strong>Data</strong> pane of our tab.</p>
<p><img src="../resources/UI-FeedProcessing-22.png" alt="Stroom UI Create Feed - Translation - Data Pane" title="Stroom UI Create Feed - Translation - Data Pane"></p>
<p>Although we can post our test data set to this feed, we will manually upload it via the <strong>Data</strong> pane. To do this we press the Upload button <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> in the top <strong>Data</strong> pane to display the <code>Upload</code> configuration window</p>
<p><img src="../resources/UI-FeedProcessing-23.png" alt="Stroom UI Create Feed - Translation - Data Pane Upload" title="Stroom UI Create Feed - Translation - Data Pane Upload"></p>
<p>In a <em>Production</em> situation, where we would post log files to Stroom, we would include certain HTTP Header variables that, as we shall see, will be used
as part of the translation. These header variables typically provide situational awareness of the source system sending the events.</p>
<p>For our purposes we set</p>
<pre><code>Environment:Development
LogFileName:sampleBluecoat.log
MyHost:&quot;somenode.strmdev00.org&quot;
MyIPaddress:&quot;192.168.2.220 192.168.122.1&quot;
MyMeta:&quot;FQDN:somenode.strmdev00.org\nipaddress:192.168.2.220\nipaddress_eth0:192.168.2.220\nipaddress_lo:127.0.0.1\nipaddress_virbr0:192.168.122.1\n&quot;
MyNameServer:&quot;gateway.strmdev00.org.&quot;
MyTZ:+1000
Shar256:056f0d196ffb4bc6c5f3898962f1708886bb48e2f20a81fb93f561f4d16cb2aa
System:Site http://log-sharing.dreamhosters.com/ Bluecoat Logs
Version:V1.0
</code></pre><p>We set these header variables in the <strong>Meta Data:</strong> entry box.</p>
<p>We select a <strong>Stream Type:</strong> of <code>Raw Events</code></p>
<p>We leave the <strong>Effective:</strong> entry box empty as this stream of raw event logs does not have an <code>Effective Date</code> (only Reference Feeds set this).</p>
<p>And we choose our file <code>sampleBluecoat.log</code>as per</p>
<p><img src="../resources/UI-FeedProcessing-24.png" alt="Stroom UI Create Feed - Translation - Data Pane Upload Complete" title="Stroom UI Create Feed - Translation - Data Pane Upload Complete"></p>
<p>On pressing <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> and <code>Alert</code> pop-up window is presented indicating the file was uploaded</p>
<p><img src="../resources/UI-FeedProcessing-25.png" alt="Stroom UI Create Feed - Translation - Data Pane Upload Complete Verify" title="Stroom UI Create Feed - Translation - Data Pane Upload Complete Verify"></p>
<p>Again press <img src="../resources/icons/buttonClose.png" alt="Stroom UI CloseButton" title="Stroom UI CloseButton"> to show that the data has been uploaded as a Stream into the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> Event Feed.</p>
<p><img src="../resources/UI-FeedProcessing-26.png" alt="Stroom UI Create Feed - Translation - Data Pane Show Batch" title="Stroom UI Create Feed - Translation - Data Pane Show Batch"></p>
<p>The top pane holds a table of the latest streams that pertain to the feed. We see the one item which is the stream we uploaded. If we select it, we see that a stream summary is also displayed in the centre pane (which shows details of the <em>specific</em> selected feed and associated streams. We also see that the bottom pane displays the data associated with the selected item. In this case, the first lines of content from the BlueCoat sample log file.</p>
<p><img src="../resources/UI-FeedProcessing-27.png" alt="Stroom UI Create Feed - Translation - Data Pane Show Data" title="Stroom UI Create Feed - Translation - Data Pane Show Data"></p>
<p>If we were to select the <strong>Meta</strong> hyper-link of the lower pane, one would see the metadata Stroom records for this Stream of data.</p>
<p><img src="../resources/UI-FeedProcessing-28.png" alt="Stroom UI Create Feed - Translation - MetaData Pane Show Data" title="Stroom UI Create Feed - Translation - MetaData Pane Show Data"></p>
<p>You should see all the HTTP variables we set as part of the Upload step as well as some that Stroom has automatically set.</p>
<p>We new switch back to the <strong>Data</strong> hyper-link before we start to develop the actual translation.</p>
<h3 id="stepping-the-pipeline">Stepping the Pipeline</h3>
<p>We will now author the two translation components of the pipeline, the data splitter that will transform our lines of BlueCoat data into a simple xml format and then the XSLT translation that will take this simple xml format and translate it into appropriate Stroom Event Logging XML form.</p>
<p>We start by ensuring our <code>Raw Events</code> Data stream is selected and we press the <code>Enter Stepping Mode</code> <img src="../resources/icons/enterStepping.png" alt="Stroom UI enterStepping Mode" title="Stroom UI Enter Stepping"> button on the lower right hand side of the bottom <code>Stream Data</code> pane.</p>
<p>You will be prompted to select a pipeline to step with. Choose the <code>BlueCoat-Proxy-V1.0-EVENTS</code> pipeline</p>
<p><img src="../resources/UI-FeedProcessing-29.png" alt="Stroom UI Create Feed - Translation - Stepping Choose Pipeline" title="Stroom UI Create Feed - Translation - Stepping Choose Pipeline"></p>
<p>then press <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton">.</p>
<h3 id="stepping-the-pipeline---source">Stepping the Pipeline - Source</h3>
<p>You will be presented with the <code>Source</code> element of the pipeline that shows our selected stream&apos;s raw data.</p>
<p><img src="../resources/UI-FeedProcessing-30.png" alt="Stroom UI Create Feed - Translation - Stepping Source Element" title="Stroom UI Create Feed - Translation - Stepping Source Element"></p>
<p>We see two panes here.</p>
<p>The top pane displays the Pipeline structure with <code>Source</code> selected (we could refer to this as the <em>stepping pane</em>) and it also displays a <em>step indicator</em> (three colon separated numbers enclosed in square brackets initially the numbers are dashes i.e. <code>[-:-:-]</code> as we have yet to step) and a set of green <em>Stepping Actions</em>. The step indicator and Stepping Actions allows one the <em>step through</em> a log file, selecting data event by event (an event is typically a line, but some events can be multi-line).</p>
<p>The bottom pane displays the first page (up to 100 lines) of data along with a set of blue <em>Data Selection Actions</em>. The Data Selection Actions are used to step through the source data 100 lines at a time. When multiple source log files have been aggregated into a single stream, two <em>Data Selection Actions</em> control buttons will be offered. The right hand one will allow a user to step though the source data as before, but the left hand set of control buttons allows one to step between files from the aggregated event log files.</p>
<h3 id="stepping-the-pipeline---dsparser">Stepping the Pipeline - dsParser</h3>
<p>We now select the <code>dsParser</code> pipeline element that results in </p>
<p><img src="../resources/UI-FeedProcessing-31.png" alt="Stroom UI Create Feed - Translation - Stepping dsParser Element" title="Stroom UI Create Feed - Translation - Stepping dsParser Element"></p>
<p>This window is made up of four panes.</p>
<p>The top pane remains the same - a display of the pipeline structure and the <em>step indicator</em> and green <em>Stepping Actions</em>.</p>
<p>The next pane down is the editing pane for the Text Converter. This pane is used to edit the text converter that converts our <em>line based</em> BlueCoat Proxy logs into a XML format. We make use of the Stroom Data Splitter facility to perform this transformation. See <a href="../../datasplitter/1-0-introduction.html">here</a> for complete details on the data splitter.</p>
<p>The lower two panes are the <em>input</em> and <em>output</em> displays for the text converter.</p>
<p>The authoring of this data splitter translation is outside the scope of this HOWTO. It is recommended that one reads up on the <a href="../../datasplitter/1-0-introduction.html">Data Splitter</a> and review the various samples found in the Stroom Context packs published, or the Pull Requests of <a href="https://github.com/gchq/stroom-content" target="_blank">https://github.com/gchq/stroom-content</a>.</p>
<p>For the purpose of this HOWTO, the Datasplitter appears below. The author believes the comments should support the understanding of the transformation.</p>
<pre><code class="lang-xslt">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;dataSplitter bufferSize=&quot;5000000&quot; xmlns=&quot;data-splitter:3&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;data-splitter:3 file://data-splitter-v3.0.xsd&quot; version=&quot;3.0&quot; ignoreErrors=&quot;true&quot;&gt;

  &lt;!-- 
  This datasplitter gains the Software and and Proxy version strings along with the log field names from the comments section of the log file.
  That is from the lines ...

  #Software: SGOS 3.2.4.28
  #Version: 1.0
  #Date: 2005-04-27 20:57:09
  #Fields: date time time-taken c-ip sc-status s-action sc-bytes cs-bytes cs-method ... x-icap-error-code x-icap-error-details

  We use the Field values as the header for the subsequent log fields
  --&gt;

  &lt;!-- Match the software comment line and save it in _bc_software --&gt;
  &lt;regex id=&quot;software&quot; pattern=&quot;^#Software: (.+) ?\n*&quot;&gt;
    &lt;data name=&quot;_bc_software&quot; value=&quot;$1&quot; /&gt;
  &lt;/regex&gt;
    &lt;!-- Match the version comment line and save it in _bc_version --&gt;

  &lt;regex id=&quot;version&quot; pattern=&quot;^#Version: (.+) ?\n*&quot;&gt;
    &lt;data name=&quot;_bc_version&quot; value=&quot;$1&quot; /&gt;
  &lt;/regex&gt;

  &lt;!-- Match against a Fields: header comment and save all the field names in a headings --&gt;

  &lt;regex id=&quot;heading&quot; pattern=&quot;^#Fields: (.+) ?\n*&quot;&gt;
    &lt;group value=&quot;$1&quot;&gt;
      &lt;regex pattern=&quot;^(\S+) ?\n*&quot;&gt;
        &lt;var id=&quot;headings&quot; /&gt;
      &lt;/regex&gt;
    &lt;/group&gt;
  &lt;/regex&gt;

  &lt;!-- Skip all other comment lines --&gt;
  &lt;regex pattern=&quot;^#.+\n*&quot;&gt;
    &lt;var id=&quot;ignorea&quot; /&gt;
  &lt;/regex&gt;

  &lt;!-- We now match all other lines, applying the headings captured at the start of the file to each field value --&gt;

  &lt;regex id=&quot;body&quot; pattern=&quot;^[^#].+\n*&quot;&gt;
    &lt;group&gt;
      &lt;regex pattern=&quot;^&amp;#34;([^&amp;#34;]*)&amp;#34; ?\n*&quot;&gt;
        &lt;data name=&quot;$headings$1&quot; value=&quot;$1&quot; /&gt;
      &lt;/regex&gt;
      &lt;regex pattern=&quot;^([^ ]+) *\n*&quot;&gt;
        &lt;data name=&quot;$headings$1&quot; value=&quot;$1&quot; /&gt;
      &lt;/regex&gt;
    &lt;/group&gt;
  &lt;/regex&gt;

  &lt;!-- --&gt;
&lt;/dataSplitter&gt;
</code></pre>
<p>It should be entered into the Text Converter&apos;s editing pane as per</p>
<p><img src="../resources/UI-FeedProcessing-32.png" alt="Stroom UI Create Feed - Translation - Stepping dsParser textConverter code" title="Stroom UI Create Feed - Translation - Stepping dsParser textConverter code"></p>
<p>A copy of this DataSplitter can be found <a href="BlueCoat.ds" title="BlueCoat dataspliter">here</a>.</p>
<p>As mentioned earlier, to <em>step</em> the translation, one uses the green  <em>Stepping Actions</em>.</p>
<p>The actions are</p>
<ul>
<li><img src="../resources/icons/stepFirst.png" alt="stepFirst" title="Step First"> - progress the transformation to the first line of the translation input</li>
<li><img src="../resources/icons/stepBack.png" alt="stepBack" title="Step Back"> - progress the transformation one step backward</li>
<li><img src="../resources/icons/stepForward.png" alt="stepForward" title="Step Forward"> - progress the transformation one step forward</li>
<li><img src="../resources/icons/stepLast.png" alt="stepLast" title="Step Last"> - progress the transformation to the end of the translation input</li>
<li><img src="../resources/icons/stepRefresh.png" alt="stepRefresh" title="Refresh Current Step"> - refresh the transformation based on the current translation input</li>
</ul>
<p>So, if one was to press the <img src="../resources/icons/stepForward.png" alt="stepForward" title="Step Forward"> <em>stepping action</em> we would be presented with</p>
<p><img src="../resources/UI-FeedProcessing-33.png" alt="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 1" title="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 1"></p>
<p>We see that the <em>input</em> pane has the first line of input from our sample file and the <em>output</em> pane has an XML <strong>record</strong> structure where we have defined a <strong>data</strong> element with the <em>name</em> attribute of <em>bc_software</em> and it&apos;s <em>value</em> attribute of <em>SGOS 3.2.4.28</em>. The definition of the <strong>record</strong> structure can be found in the <strong>System/XML Schemas/records</strong> folder.</p>
<p>This is the result of the code in our editor</p>
<pre><code class="lang-xslt">&lt;!-- Match the software comment line and save it in _bc_software --&gt;
&lt;regex id=&quot;software&quot; pattern=&quot;^#Software: (.+) ?\n*&quot;&gt;
  &lt;data name=&quot;_bc_software&quot; value=&quot;$1&quot; /&gt;
&lt;/regex&gt;
</code></pre>
<p>If one presses the <img src="../resources/icons/stepForward.png" alt="stepForward" title="Step Forward"> <em>stepping action</em> again, we see that we have moved to the second line of the input file with the resultant output of a <strong>data</strong> element with the <em>name</em> attribute of <em>bc_version</em> and it&apos;s <em>value</em> attribute of <em>1.0</em>.</p>
<p><img src="../resources/UI-FeedProcessing-34.png" alt="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 2" title="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 2"></p>
<p>Stepping forward once more causes the translation to ignore the Date comment line, define a Data Splitter $headings variable from the Fields comment line and transform the first line of actual event data.</p>
<p><img src="../resources/UI-FeedProcessing-35.png" alt="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 3" title="Stroom UI Create Feed - Translation - Stepping dsParser textConverter 3"></p>
<p>We see that a <code>&lt;record&gt;</code> element has been formed with multiple key value pair <code>&lt;data&gt;</code> elements where the <em>name</em> attribute is the key and the <em>value</em> attribute the value. You will note that the keys have been taken from the Fields comment line which where placed in the $headings variable.</p>
<p>You should also take note that the <em>stepping indicator</em> has been incrementing the last number, so at this point it is displaying</p>
<pre><code>[1:1:3]
</code></pre><p>The general form of this <em>indicator</em> is </p>
<pre><code>&apos;[&apos; streamId &apos;:&apos; subStreamId &apos;:&apos; recordNo &apos;]&apos;
</code></pre><p>where</p>
<ul>
<li><strong>streamId</strong> - is the stream ID and won&apos;t change when stepping through the selected stream,</li>
<li><strong>subStreamId</strong> - is the sub stream ID. When Stroom aggregates multiple event sources for a feed, it aggregates multiple input files and this is, in effect, the file number.</li>
<li><strong>recordNo</strong> - is the record number within the sub stream.</li>
</ul>
<p>One can double click on either the <strong>subStreamId</strong> or <strong>recordNo</strong> entry and enter a new value. This allows you to <em>jump</em> around a stream rather than just relying on first, previous, next and last movements.</p>
<p>Hovering the mouse over the <em>stepping indicator</em> will change the cursor to a <code>hand pointer</code>. Selecting (by a left click) the <code>recordNo</code> will allow you to edit it&apos;s value (and the other values for that matter). You will see the display change from</p>
<p><img src="../resources/UI-FeedProcessing-36.png" alt="Stroom UI Create Feed - Translation - Stepping Indicator 1" title="Stroom UI Create Feed - Translation - Stepping Indicator 1">
to
<img src="../resources/UI-FeedProcessing-37.png" alt="Stroom UI Create Feed - Translation - Stepping Indicator 2" title="Stroom UI Create Feed - Translation - Stepping Indicator 2"></p>
<p>If we change the record number from <strong>3</strong> to <strong>12</strong> then either press Enter or press the <img src="../resources/icons/stepRefresh.png" alt="stepRefresh" title="Refresh Current Step"> action we see</p>
<p><img src="../resources/UI-FeedProcessing-38.png" alt="Stroom UI Create Feed - Translation - Stepping Indicator 3" title="Stroom UI Create Feed - Translation - Stepping Indicator 3"></p>
<p>and note that a new record has been processed in the <em>input</em> and <em>output</em> panes. Further, if one steps back to the <code>Source</code> element of the pipeline to view the raw source file, we see that the highlighted <strong>current</strong> line is the 12th line of process data (It may be the 10 actual bluecoat event, but remember the #Software, #Version lines are considered as processed data)</p>
<p><img src="../resources/UI-FeedProcessing-39.png" alt="Stroom UI Create Feed - Translation - Stepping Indicator 4" title="Stroom UI Create Feed - Translation - Stepping Indicator 4"></p>
<p>If we select the <code>dsParser</code> pipeline element then press the <img src="../resources/icons/stepLast.png" alt="stepLast" title="Step Last"> action we see the <code>recordNo</code> jump to 31 which is the last processed line of our sample log file.</p>
<p><img src="../resources/UI-FeedProcessing-40.png" alt="Stroom UI Create Feed - Translation - Stepping Indicator 5" title="Stroom UI Create Feed - Translation - Stepping Indicator 5"></p>
<h3 id="stepping-the-pipeline---translationfilter">Stepping the Pipeline - translationFilter</h3>
<p>We now select the <code>translationFilter</code> pipeline element that results in </p>
<p><img src="../resources/UI-FeedProcessing-41.png" alt="Stroom UI Create Feed - Translation - Stepping translationFilter Element" title="Stroom UI Create Feed - Translation - Stepping translationFilter Element"></p>
<p>As for the <code>dsParser</code>, this window is made up of four panes.</p>
<p>The top pane remains the same - a display of the pipeline structure and the <em>step indicator</em> and green <em>Stepping Actions</em>.</p>
<p>The next pane down is the editing pane for the Translation Filter. This pane is used to edit an <em>xslt</em> translation that converts our simple key value pair <code>&lt;records&gt;</code> XML structure into another XML form.</p>
<p>The lower two panes are the <em>input</em> and <em>output</em> displays for the xslt translation. You will note that the <em>input</em> and <em>output</em> displays are identical for a null xslt translation is effectively a direct copy.</p>
<p>In this HOWTO we will transform the <code>&lt;records&gt;</code> XML structure into the <em>GCHQ Stroom Event Logging XML Schema</em> form which is documented <a href="https://github.com/gchq/event-logging-schema" target="_blank">here</a>.</p>
<p>The authoring of this xslt translation is outside the scope of this HOWTO, as is the use of the Stroom XML Schema. It is recommended that one reads up on <a href="../../user-guide/pipelines/xslt/">XSLT Conversion</a> and the <a href="https://github.com/gchq/event-logging-schema" target="_blank">Stroom Event Logging XML Schema</a> and review the various samples found in the Stroom Context packs published, or the Pull Requests of <a href="https://github.com/gchq/stroom-content" target="_blank">https://github.com/gchq/stroom-content</a>.</p>
<p>We will build the translation in steps. We enter an initial portion of our xslt transformation that just consumes the <code>Software</code> and <code>Version</code> key values and converts the <code>date</code> and <code>time</code> values (which are in UTC) into the <code>EventTime/TimeCreated</code> element. This code segment is</p>
<pre><code class="lang-xslt">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xsl:stylesheet xpath-default-namespace=&quot;records:2&quot; xmlns=&quot;event-logging:3&quot; xmlns:stroom=&quot;stroom&quot; 
                xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;3.0&quot;&gt;

  &lt;!-- Bluecoat Proxy logs in W2C Extended Log File Format (ELF) --&gt;

  &lt;!-- Ingest the record key value pair elements --&gt;
  &lt;xsl:template match=&quot;records&quot;&gt;
    &lt;Events xsi:schemaLocation=&quot;event-logging:3 file://event-logging-v3.2.4.xsd&quot; Version=&quot;3.2.4&quot;&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/Events&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Main record template for single event --&gt;
  &lt;xsl:template match=&quot;record&quot;&gt;
    &lt;xsl:choose&gt;

      &lt;!-- Store the Software and Version information of the Bluecoat log file for use in the Event Source elements which are processed later --&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_software&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_software&apos;, data[@name=&apos;_bc_software&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_version&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_version&apos;, data[@name=&apos;_bc_version&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;

      &lt;!-- Process the event logs --&gt;
      &lt;xsl:otherwise&gt;
        &lt;Event&gt;
          &lt;xsl:call-template name=&quot;event_time&quot; /&gt;
        &lt;/Event&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Time --&gt;
  &lt;xsl:template name=&quot;event_time&quot;&gt;
    &lt;EventTime&gt;
      &lt;TimeCreated&gt;
        &lt;xsl:value-of select=&quot;concat(data[@name = &apos;date&apos;]/@value,&apos;T&apos;,data[@name=&apos;time&apos;]/@value,&apos;.000Z&apos;)&quot; /&gt;
      &lt;/TimeCreated&gt;
    &lt;/EventTime&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>After entering this translation and pressing the <img src="../resources/icons/stepRefresh.png" alt="stepRefresh" title="Refresh Current Step"> action shows the display</p>
<p><img src="../resources/UI-FeedProcessing-42.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 1" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 1"></p>
<p>Note that this is the 31st record, so if we were to jump to the first record using the <img src="../resources/icons/stepFirst.png" alt="stepFirst" title="Step First"> action, we see that the <em>input</em> and <em>output</em> change appropriately.</p>
<p><img src="../resources/UI-FeedProcessing-43.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 2" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 2"></p>
<p>You will note that there is no <code>Event</code> element in the <em>output</em> as the <em>record</em> template only stores the input&apos;s key value and does not process an event log (the <xsl:otherwise> in our xslt translation above).</xsl:otherwise></p>
<p>Further note that the <strong>BlueCoat_Proxy-V1.0-EVENTS</strong> tab has a <em>star</em> in front of it and also the <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save"> is highlighted. This indicates that a component of the pipeline needs to be saved. In this case, the XSLT translation.</p>
<p><img src="../resources/UI-FeedProcessing-44.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 3" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 3"></p>
<p>By pressing the <em>Save</em> icon, you will save the XSLT translation as it currently stands and both the <em>star</em> will be removed from the tab and the <em>Save</em> icon will no longer be highlighted.</p>
<p><img src="../resources/UI-FeedProcessing-45.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 4" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 4"></p>
<p>We next extend out translation by authoring a <strong>event_source</strong> template to form an appropriate Stroom Event Logging <code>EventSource</code> element structure. Thus our translation now is</p>
<pre><code class="lang-xslt">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xsl:stylesheet xpath-default-namespace=&quot;records:2&quot; xmlns=&quot;event-logging:3&quot; xmlns:stroom=&quot;stroom&quot;
                xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;3.0&quot;&gt;

  &lt;!-- Bluecoat Proxy logs in W2C Extended Log File Format (ELF) --&gt;

  &lt;!-- Ingest the record key value pair elements --&gt;
  &lt;xsl:template match=&quot;records&quot;&gt;
    &lt;Events xsi:schemaLocation=&quot;event-logging:3 file://event-logging-v3.2.4.xsd&quot; Version=&quot;3.2.4&quot;&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/Events&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Main record template for single event --&gt;
  &lt;xsl:template match=&quot;record&quot;&gt;
    &lt;xsl:choose&gt;

      &lt;!-- Store the Software and Version information of the Bluecoat log file for use in the Event Source elements which are processed later --&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_software&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_software&apos;, data[@name=&apos;_bc_software&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_version&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_version&apos;, data[@name=&apos;_bc_version&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;

      &lt;!-- Process the event logs --&gt;
      &lt;xsl:otherwise&gt;
        &lt;Event&gt;
          &lt;xsl:call-template name=&quot;event_time&quot; /&gt;
          &lt;xsl:call-template name=&quot;event_source&quot; /&gt;
        &lt;/Event&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Time --&gt;
  &lt;xsl:template name=&quot;event_time&quot;&gt;
    &lt;EventTime&gt;
      &lt;TimeCreated&gt;
        &lt;xsl:value-of select=&quot;concat(data[@name = &apos;date&apos;]/@value,&apos;T&apos;,data[@name=&apos;time&apos;]/@value,&apos;.000Z&apos;)&quot; /&gt;
      &lt;/TimeCreated&gt;
    &lt;/EventTime&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Template for event source--&gt;
  &lt;xsl:template name=&quot;event_source&quot;&gt;

    &lt;!--
    We extract some situational awareness information that the posting script includes when posting the event data 
    --&gt;
    &lt;xsl:variable name=&quot;_mymeta&quot; select=&quot;translate(stroom:meta(&apos;MyMeta&apos;),&apos;&amp;quot;&apos;, &apos;&apos;)&quot; /&gt;

    &lt;!-- Form the EventSource node --&gt;
    &lt;EventSource&gt;
      &lt;System&gt;
        &lt;Name&gt;
          &lt;xsl:value-of select=&quot;stroom:meta(&apos;System&apos;)&quot; /&gt;
        &lt;/Name&gt;
        &lt;Environment&gt;
          &lt;xsl:value-of select=&quot;stroom:meta(&apos;Environment&apos;)&quot; /&gt;
        &lt;/Environment&gt;
      &lt;/System&gt;
      &lt;Generator&gt;
        &lt;xsl:variable name=&quot;gen&quot;&gt;
          &lt;xsl:if test=&quot;stroom:get(&apos;_bc_software&apos;)&quot;&gt;
            &lt;xsl:value-of select=&quot;concat(&apos; Software: &apos;, stroom:get(&apos;_bc_software&apos;))&quot; /&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;stroom:get(&apos;_bc_version&apos;)&quot;&gt;
            &lt;xsl:value-of select=&quot;concat(&apos; Version: &apos;, stroom:get(&apos;_bc_version&apos;))&quot; /&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:value-of select=&quot;concat(&apos;Bluecoat&apos;, $gen)&quot; /&gt;
      &lt;/Generator&gt;
      &lt;xsl:if test=&quot;data[@name=&apos;s-computername&apos;] or data[@name=&apos;s-ip&apos;]&quot;&gt;
        &lt;Device&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-computername&apos;]&quot;&gt;
            &lt;Name&gt;
              &lt;xsl:value-of select=&quot;data[@name=&apos;s-computername&apos;]/@value&quot; /&gt;
            &lt;/Name&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-ip&apos;]&quot;&gt;
            &lt;IPAddress&gt;
              &lt;xsl:value-of select=&quot; data[@name=&apos;s-ip&apos;]/@value&quot; /&gt;
            &lt;/IPAddress&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-sitename&apos;]&quot;&gt;
            &lt;Data Name=&quot;ServiceType&quot; Value=&quot;{data[@name=&apos;s-sitename&apos;]/@value}&quot; /&gt;
          &lt;/xsl:if&gt;
        &lt;/Device&gt;
      &lt;/xsl:if&gt;

      &lt;!-- --&gt;
      &lt;Client&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-ip&apos;]/@value != &apos;-&apos;&quot;&gt;
          &lt;IPAddress&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-ip&apos;]/@value&quot; /&gt;
          &lt;/IPAddress&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Remote Port Number --&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-port&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;Port&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-port&apos;]/@value&quot; /&gt;
          &lt;/Port&gt;
        &lt;/xsl:if&gt;
      &lt;/Client&gt;

      &lt;!-- --&gt;
      &lt;Server&gt;
        &lt;HostName&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-host&apos;]/@value&quot; /&gt;
        &lt;/HostName&gt;
      &lt;/Server&gt;

      &lt;!-- --&gt;
      &lt;xsl:variable name=&quot;user&quot;&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-user&apos;]/@value&quot; /&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-username&apos;]/@value&quot; /&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-userdn&apos;]/@value&quot; /&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test=&quot;$user !=&apos;-&apos;&quot;&gt;
        &lt;User&gt;
          &lt;Id&gt;
            &lt;xsl:value-of select=&quot;$user&quot; /&gt;
          &lt;/Id&gt;
        &lt;/User&gt;
      &lt;/xsl:if&gt;
      &lt;Data Name=&quot;MyMeta&quot;&gt;
        &lt;xsl:attribute name=&quot;Value&quot; select=&quot;$_mymeta&quot; /&gt;
      &lt;/Data&gt;
    &lt;/EventSource&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Stepping to the 3 record (the first real data record in our sample log) will reveal that our <em>output</em> pane has gained an <code>EventSource</code> element.</p>
<p><img src="../resources/UI-FeedProcessing-46.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 5" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 5"></p>
<p>Note also, that our <em>Save</em> icon <img src="../resources/icons/save.png" alt="Save" title="Save"> is also highlighted, so we should at some point save the extensions to our translation.</p>
<p>The complete translation now follows. A copy of the XSLT translation can be found <a href="BlueCoat.xslt" title="BlueCoat XSLT Translation">here</a>.</p>
<pre><code class="lang-xslt">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xsl:stylesheet xpath-default-namespace=&quot;records:2&quot; xmlns=&quot;event-logging:3&quot; xmlns:stroom=&quot;stroom&quot; 
                xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;3.0&quot;&gt;

  &lt;!-- Bluecoat Proxy logs in W2C Extended Log File Format (ELF) --&gt;

  &lt;!-- Ingest the record key value pair elements --&gt;
  &lt;xsl:template match=&quot;records&quot;&gt;
    &lt;Events xsi:schemaLocation=&quot;event-logging:3 file://event-logging-v3.2.4.xsd&quot; Version=&quot;3.2.4&quot;&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/Events&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Main record template for single event --&gt;
  &lt;xsl:template match=&quot;record&quot;&gt;
    &lt;xsl:choose&gt;

      &lt;!-- Store the Software and Version information of the Bluecoat log file for use in the Event Source elements which are processed later --&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_software&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_software&apos;, data[@name=&apos;_bc_software&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;_bc_version&apos;]&quot;&gt;
        &lt;xsl:value-of select=&quot;stroom:put(&apos;_bc_version&apos;, data[@name=&apos;_bc_version&apos;]/@value)&quot; /&gt;
      &lt;/xsl:when&gt;

      &lt;!-- Process the event logs --&gt;
      &lt;xsl:otherwise&gt;
        &lt;Event&gt;
          &lt;xsl:call-template name=&quot;event_time&quot; /&gt;
          &lt;xsl:call-template name=&quot;event_source&quot; /&gt;
          &lt;xsl:call-template name=&quot;event_detail&quot; /&gt;
        &lt;/Event&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Time --&gt;
  &lt;xsl:template name=&quot;event_time&quot;&gt;
    &lt;EventTime&gt;
      &lt;TimeCreated&gt;
        &lt;xsl:value-of select=&quot;concat(data[@name = &apos;date&apos;]/@value,&apos;T&apos;,data[@name=&apos;time&apos;]/@value,&apos;.000Z&apos;)&quot; /&gt;
      &lt;/TimeCreated&gt;
    &lt;/EventTime&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Template for event source--&gt;
  &lt;xsl:template name=&quot;event_source&quot;&gt;

    &lt;!--
    We extract some situational awareness information that the posting script includes when posting the event data 
    --&gt;
    &lt;xsl:variable name=&quot;_mymeta&quot; select=&quot;translate(stroom:meta(&apos;MyMeta&apos;),&apos;&amp;quot;&apos;, &apos;&apos;)&quot; /&gt;

    &lt;!-- Form the EventSource node --&gt;
    &lt;EventSource&gt;
      &lt;System&gt;
        &lt;Name&gt;
          &lt;xsl:value-of select=&quot;stroom:meta(&apos;System&apos;)&quot; /&gt;
        &lt;/Name&gt;
        &lt;Environment&gt;
          &lt;xsl:value-of select=&quot;stroom:meta(&apos;Environment&apos;)&quot; /&gt;
        &lt;/Environment&gt;
      &lt;/System&gt;
      &lt;Generator&gt;
        &lt;xsl:variable name=&quot;gen&quot;&gt;
          &lt;xsl:if test=&quot;stroom:get(&apos;_bc_software&apos;)&quot;&gt;
            &lt;xsl:value-of select=&quot;concat(&apos; Software: &apos;, stroom:get(&apos;_bc_software&apos;))&quot; /&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;stroom:get(&apos;_bc_version&apos;)&quot;&gt;
            &lt;xsl:value-of select=&quot;concat(&apos; Version: &apos;, stroom:get(&apos;_bc_version&apos;))&quot; /&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:value-of select=&quot;concat(&apos;Bluecoat&apos;, $gen)&quot; /&gt;
      &lt;/Generator&gt;
      &lt;xsl:if test=&quot;data[@name=&apos;s-computername&apos;] or data[@name=&apos;s-ip&apos;]&quot;&gt;
        &lt;Device&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-computername&apos;]&quot;&gt;
            &lt;Name&gt;
              &lt;xsl:value-of select=&quot;data[@name=&apos;s-computername&apos;]/@value&quot; /&gt;
            &lt;/Name&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-ip&apos;]&quot;&gt;
            &lt;IPAddress&gt;
              &lt;xsl:value-of select=&quot; data[@name=&apos;s-ip&apos;]/@value&quot; /&gt;
            &lt;/IPAddress&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;s-sitename&apos;]&quot;&gt;
            &lt;Data Name=&quot;ServiceType&quot; Value=&quot;{data[@name=&apos;s-sitename&apos;]/@value}&quot; /&gt;
          &lt;/xsl:if&gt;
        &lt;/Device&gt;
      &lt;/xsl:if&gt;

      &lt;!-- --&gt;
      &lt;Client&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-ip&apos;]/@value != &apos;-&apos;&quot;&gt;
          &lt;IPAddress&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-ip&apos;]/@value&quot; /&gt;
          &lt;/IPAddress&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Remote Port Number --&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-port&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;Port&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-port&apos;]/@value&quot; /&gt;
          &lt;/Port&gt;
        &lt;/xsl:if&gt;
      &lt;/Client&gt;

      &lt;!-- --&gt;
      &lt;Server&gt;
        &lt;HostName&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-host&apos;]/@value&quot; /&gt;
        &lt;/HostName&gt;
      &lt;/Server&gt;

      &lt;!-- --&gt;
      &lt;xsl:variable name=&quot;user&quot;&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-user&apos;]/@value&quot; /&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-username&apos;]/@value&quot; /&gt;
        &lt;xsl:value-of select=&quot;data[@name=&apos;cs-userdn&apos;]/@value&quot; /&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test=&quot;$user !=&apos;-&apos;&quot;&gt;
        &lt;User&gt;
          &lt;Id&gt;
            &lt;xsl:value-of select=&quot;$user&quot; /&gt;
          &lt;/Id&gt;
        &lt;/User&gt;
      &lt;/xsl:if&gt;
      &lt;Data Name=&quot;MyMeta&quot;&gt;
        &lt;xsl:attribute name=&quot;Value&quot; select=&quot;$_mymeta&quot; /&gt;
      &lt;/Data&gt;
    &lt;/EventSource&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Event detail --&gt;
  &lt;xsl:template name=&quot;event_detail&quot;&gt;
    &lt;EventDetail&gt;

      &lt;!--
      We model Proxy events as either Receive or Send events depending on the method.

      We make use of the Receive/Send sub-elements Source/Destination to map the Client/Destination Proxy values
      and the Payload sub-element to map the URL and other details of the activity. If we have a query, we model it
      as a Criteria

      --&gt;
      &lt;TypeId&gt;
        &lt;xsl:value-of select=&quot;concat(&apos;Bluecoat-&apos;, data[@name=&apos;cs-method&apos;]/@value, &apos;-&apos;, data[@name=&apos;cs-uri-scheme&apos;]/@value)&quot; /&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;cs-uri-query&apos;]/@value != &apos;-&apos;&quot;&gt;-Query&lt;/xsl:if&gt;
      &lt;/TypeId&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test=&quot;matches(data[@name=&apos;cs-method&apos;]/@value, &apos;GET|OPTIONS|HEAD&apos;)&quot;&gt;
          &lt;Description&gt;Receipt of information from a Resource via Proxy&lt;/Description&gt;
          &lt;Receive&gt;
            &lt;xsl:call-template name=&quot;setupParticipants&quot; /&gt;
            &lt;xsl:call-template name=&quot;setPayload&quot; /&gt;
            &lt;xsl:call-template name=&quot;setOutcome&quot; /&gt;
          &lt;/Receive&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;Description&gt;Transmission of information to a Resource via Proxy&lt;/Description&gt;
          &lt;Send&gt;
            &lt;xsl:call-template name=&quot;setupParticipants&quot; /&gt;
            &lt;xsl:call-template name=&quot;setPayload&quot; /&gt;
            &lt;xsl:call-template name=&quot;setOutcome&quot; /&gt;
          &lt;/Send&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/EventDetail&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Establish the Source and Destination nodes --&gt;
  &lt;xsl:template name=&quot;setupParticipants&quot;&gt;
    &lt;Source&gt;
      &lt;Device&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-ip&apos;]/@value != &apos;-&apos;&quot;&gt;
          &lt;IPAddress&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-ip&apos;]/@value&quot; /&gt;
          &lt;/IPAddress&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Remote Port Number --&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;c-port&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;Port&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;c-port&apos;]/@value&quot; /&gt;
          &lt;/Port&gt;
        &lt;/xsl:if&gt;
      &lt;/Device&gt;
    &lt;/Source&gt;
    &lt;Destination&gt;
      &lt;Device&gt;
        &lt;HostName&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-host&apos;]/@value&quot; /&gt;
        &lt;/HostName&gt;
      &lt;/Device&gt;
    &lt;/Destination&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Define the Payload node --&gt;
  &lt;xsl:template name=&quot;setPayload&quot;&gt;
    &lt;Payload&gt;
      &lt;xsl:if test=&quot;data[@name=&apos;cs-uri-query&apos;]/@value != &apos;-&apos;&quot;&gt;
        &lt;Criteria&gt;
          &lt;DataSources&gt;
            &lt;DataSource&gt;
              &lt;xsl:value-of select=&quot;concat(data[@name=&apos;cs-uri-scheme&apos;]/@value, &apos;://&apos;, data[@name=&apos;cs-host&apos;]/@value)&quot; /&gt;
              &lt;xsl:if test=&quot;data[@name=&apos;cs-uri-path&apos;]/@value != &apos;/&apos;&quot;&gt;
                &lt;xsl:value-of select=&quot;data[@name=&apos;cs-uri-path&apos;]/@value&quot; /&gt;
              &lt;/xsl:if&gt;
            &lt;/DataSource&gt;
          &lt;/DataSources&gt;
          &lt;Query&gt;
            &lt;Raw&gt;
              &lt;xsl:value-of select=&quot;data[@name=&apos;cs-uri-query&apos;]/@value&quot; /&gt;
            &lt;/Raw&gt;
          &lt;/Query&gt;
        &lt;/Criteria&gt;
      &lt;/xsl:if&gt;
      &lt;Resource&gt;

        &lt;!-- Check for auth groups the URL belongs to --&gt;
        &lt;xsl:variable name=&quot;authgroups&quot;&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-auth-group&apos;]/@value&quot; /&gt;
          &lt;xsl:if test=&quot;exists(data[@name=&apos;cs-auth-group&apos;]) and exists(data[@name=&apos;cs-auth-groups&apos;])&quot;&gt;,&lt;/xsl:if&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-auth-groups&apos;]/@value&quot; /&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test=&quot;contains($authgroups, &apos;,&apos;)&quot;&gt;
            &lt;Groups&gt;
              &lt;xsl:for-each select=&quot;tokenize($authgroups, &apos;,&apos;)&quot;&gt;
                &lt;Group&gt;
                  &lt;Id&gt;
                    &lt;xsl:value-of select=&quot;.&quot; /&gt;
                  &lt;/Id&gt;
                &lt;/Group&gt;
              &lt;/xsl:for-each&gt;
            &lt;/Groups&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test=&quot;$authgroups != &apos;-&apos; and $authgroups != &apos;&apos;&quot;&gt;
            &lt;Groups&gt;
              &lt;Group&gt;
                &lt;Id&gt;
                  &lt;xsl:value-of select=&quot;$authgroups&quot; /&gt;
                &lt;/Id&gt;
              &lt;/Group&gt;
            &lt;/Groups&gt;
          &lt;/xsl:when&gt;
        &lt;/xsl:choose&gt;

        &lt;!-- Re-form the URL --&gt;
        &lt;URL&gt;
          &lt;xsl:value-of select=&quot;concat(data[@name=&apos;cs-uri-scheme&apos;]/@value, &apos;://&apos;, data[@name=&apos;cs-host&apos;]/@value)&quot; /&gt;
          &lt;xsl:if test=&quot;data[@name=&apos;cs-uri-path&apos;]/@value != &apos;/&apos;&quot;&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;cs-uri-path&apos;]/@value&quot; /&gt;
          &lt;/xsl:if&gt;
        &lt;/URL&gt;
        &lt;HTTPMethod&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;cs-method&apos;]/@value&quot; /&gt;
        &lt;/HTTPMethod&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;cs(User-Agent)&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;UserAgent&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;cs(User-Agent)&apos;]/@value&quot; /&gt;
          &lt;/UserAgent&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Inbound activity --&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;sc-bytes&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;InboundSize&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;sc-bytes&apos;]/@value&quot; /&gt;
          &lt;/InboundSize&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;sc-bodylength&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;InboundContentSize&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;sc-bodylength&apos;]/@value&quot; /&gt;
          &lt;/InboundContentSize&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Outbound activity --&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;cs-bytes&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;OutboundSize&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;cs-bytes&apos;]/@value&quot; /&gt;
          &lt;/OutboundSize&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;cs-bodylength&apos;]/@value !=&apos;-&apos;&quot;&gt;
          &lt;OutboundContentSize&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;cs-bodylength&apos;]/@value&quot; /&gt;
          &lt;/OutboundContentSize&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Miscellaneous --&gt;
        &lt;RequestTime&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;time-taken&apos;]/@value&quot; /&gt;
        &lt;/RequestTime&gt;
        &lt;ResponseCode&gt;
          &lt;xsl:value-of select=&quot;data[@name=&apos;sc-status&apos;]/@value&quot; /&gt;
        &lt;/ResponseCode&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;rs(Content-Type)&apos;]/@value != &apos;-&apos;&quot;&gt;
          &lt;MimeType&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;rs(Content-Type)&apos;]/@value&quot; /&gt;
          &lt;/MimeType&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test=&quot;data[@name=&apos;cs-categories&apos;]/@value != &apos;none&apos; or data[@name=&apos;sc-filter-category&apos;]/@value != &apos;none&apos;&quot;&gt;
          &lt;Category&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;cs-categories&apos;]/@value&quot; /&gt;
            &lt;xsl:value-of select=&quot;data[@name=&apos;sc-filter-category&apos;]/@value&quot; /&gt;
          &lt;/Category&gt;
        &lt;/xsl:if&gt;

        &lt;!-- Take up other items as data elements --&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;s-action&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;cs-uri-scheme&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;s-hierarchy&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;sc-filter-result&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;x-virus-id&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;x-virus-details&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;x-icap-error-code&apos;]&quot; /&gt;
        &lt;xsl:apply-templates select=&quot;data[@name=&apos;x-icap-error-details&apos;]&quot; /&gt;
      &lt;/Resource&gt;
    &lt;/Payload&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Generic Data capture template so we capture all other Bluecoat objects not already consumed --&gt;
  &lt;xsl:template match=&quot;data&quot;&gt;
    &lt;xsl:if test=&quot;@value != &apos;-&apos;&quot;&gt;
      &lt;Data Name=&quot;{@name}&quot; Value=&quot;{@value}&quot; /&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:template&gt;

  &lt;!-- 
  Set up the Outcome node.

  We only set an Outcome for an error state. The absence of an Outcome infers success
  --&gt;
  &lt;xsl:template name=&quot;setOutcome&quot;&gt;
    &lt;xsl:choose&gt;

      &lt;!-- Favour squid specific errors first --&gt;
      &lt;xsl:when test=&quot;data[@name=&apos;sc-status&apos;]/@value &gt; 500&quot;&gt;
        &lt;Outcome&gt;
          &lt;Success&gt;false&lt;/Success&gt;
          &lt;Description&gt;
            &lt;xsl:call-template name=&quot;responseCodeDesc&quot;&gt;
              &lt;xsl:with-param name=&quot;code&quot; select=&quot;data[@name=&apos;sc-status&apos;]/@value&quot; /&gt;
            &lt;/xsl:call-template&gt;
          &lt;/Description&gt;
        &lt;/Outcome&gt;
      &lt;/xsl:when&gt;

      &lt;!-- Now check for &apos;normal&apos; errors --&gt;
      &lt;xsl:when test=&quot;tCliStatus &gt; 400&quot;&gt;
        &lt;Outcome&gt;
          &lt;Success&gt;false&lt;/Success&gt;
          &lt;Description&gt;
            &lt;xsl:call-template name=&quot;responseCodeDesc&quot;&gt;
              &lt;xsl:with-param name=&quot;code&quot; select=&quot;data[@name=&apos;sc-status&apos;]/@value&quot; /&gt;
            &lt;/xsl:call-template&gt;
          &lt;/Description&gt;
        &lt;/Outcome&gt;
      &lt;/xsl:when&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;

  &lt;!-- Response Code map to Descriptions --&gt;
  &lt;xsl:template name=&quot;responseCodeDesc&quot;&gt;
    &lt;xsl:param name=&quot;code&quot; /&gt;
    &lt;xsl:choose&gt;

      &lt;!-- Informational --&gt;
      &lt;xsl:when test=&quot;$code = 100&quot;&gt;Continue&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 101&quot;&gt;Switching Protocols&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 102&quot;&gt;Processing&lt;/xsl:when&gt;

      &lt;!-- Successful Transaction --&gt;
      &lt;xsl:when test=&quot;$code = 200&quot;&gt;OK&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 201&quot;&gt;Created&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 202&quot;&gt;Accepted&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 203&quot;&gt;Non-Authoritative Information&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 204&quot;&gt;No Content&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 205&quot;&gt;Reset Content&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 206&quot;&gt;Partial Content&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 207&quot;&gt;Multi Status&lt;/xsl:when&gt;

      &lt;!-- Redirection --&gt;
      &lt;xsl:when test=&quot;$code = 300&quot;&gt;Multiple Choices&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 301&quot;&gt;Moved Permanently&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 302&quot;&gt;Moved Temporarily&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 303&quot;&gt;See Other&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 304&quot;&gt;Not Modified&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 305&quot;&gt;Use Proxy&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 307&quot;&gt;Temporary Redirect&lt;/xsl:when&gt;

      &lt;!-- Client Error --&gt;
      &lt;xsl:when test=&quot;$code = 400&quot;&gt;Bad Request&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 401&quot;&gt;Unauthorized&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 402&quot;&gt;Payment Required&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 403&quot;&gt;Forbidden&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 404&quot;&gt;Not Found&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 405&quot;&gt;Method Not Allowed&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 406&quot;&gt;Not Acceptable&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 407&quot;&gt;Proxy Authentication Required&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 408&quot;&gt;Request Timeout&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 409&quot;&gt;Conflict&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 410&quot;&gt;Gone&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 411&quot;&gt;Length Required&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 412&quot;&gt;Precondition Failed&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 413&quot;&gt;Request Entity Too Large&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 414&quot;&gt;Request URI Too Large&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 415&quot;&gt;Unsupported Media Type&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 416&quot;&gt;Request Range Not Satisfiable&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 417&quot;&gt;Expectation Failed&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 422&quot;&gt;Unprocessable Entity&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 424&quot;&gt;Locked/Failed Dependency&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 433&quot;&gt;Unprocessable Entity&lt;/xsl:when&gt;

      &lt;!-- Server Error --&gt;
      &lt;xsl:when test=&quot;$code = 500&quot;&gt;Internal Server Error&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 501&quot;&gt;Not Implemented&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 502&quot;&gt;Bad Gateway&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 503&quot;&gt;Service Unavailable&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 504&quot;&gt;Gateway Timeout&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 505&quot;&gt;HTTP Version Not Supported&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 507&quot;&gt;Insufficient Storage&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 600&quot;&gt;Squid: header parsing error&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 601&quot;&gt;Squid: header size overflow detected while parsing/roundcube: software configuration error&lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$code = 603&quot;&gt;roundcube: invalid authorization&lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:value-of select=&quot;concat(&apos;Unknown Code:&apos;, $code)&quot; /&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Refreshing the current event will show the <em>output</em> pane contains</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Events xmlns=&quot;event-logging:3&quot; xmlns:stroom=&quot;stroom&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xsi:schemaLocation=&quot;event-logging:3 file://event-logging-v3.2.4.xsd&quot; Version=&quot;3.2.4&quot;&gt;
  &lt;Event&gt;
    &lt;EventTime&gt;
      &lt;TimeCreated&gt;2005-05-04T17:16:12.000Z&lt;/TimeCreated&gt;
    &lt;/EventTime&gt;
    &lt;EventSource&gt;
      &lt;System&gt;
        &lt;Name&gt;Site http://log-sharing.dreamhosters.com/ Bluecoat Logs&lt;/Name&gt;
        &lt;Environment&gt;Development&lt;/Environment&gt;
      &lt;/System&gt;
      &lt;Generator&gt;Bluecoat Software: SGOS 3.2.4.28 Version: 1.0&lt;/Generator&gt;
      &lt;Device&gt;
        &lt;IPAddress&gt;192.16.170.42&lt;/IPAddress&gt;
        &lt;Data Name=&quot;ServiceType&quot; Value=&quot;SG-HTTP-Service&quot; /&gt;
      &lt;/Device&gt;
      &lt;Client&gt;
        &lt;IPAddress&gt;45.110.2.82&lt;/IPAddress&gt;
      &lt;/Client&gt;
      &lt;Server&gt;
        &lt;HostName&gt;www.inmobus.com&lt;/HostName&gt;
      &lt;/Server&gt;
      &lt;User&gt;
        &lt;Id&gt;george&lt;/Id&gt;
      &lt;/User&gt;
      &lt;Data Name=&quot;MyMeta&quot; Value=&quot;FQDN:somenode.strmdev00.org\nipaddress:192.168.2.220\nipaddress_eth0:192.168.2.220\nipaddress_lo:127.0.0.1\nipaddress_virbr0:192.168.122.1\n&quot; /&gt;
    &lt;/EventSource&gt;
    &lt;EventDetail&gt;
      &lt;TypeId&gt;Bluecoat-GET-http&lt;/TypeId&gt;
      &lt;Description&gt;Receipt of information from a Resource via Proxy&lt;/Description&gt;
      &lt;Receive&gt;
        &lt;Source&gt;
          &lt;Device&gt;
            &lt;IPAddress&gt;45.110.2.82&lt;/IPAddress&gt;
          &lt;/Device&gt;
        &lt;/Source&gt;
        &lt;Destination&gt;
          &lt;Device&gt;
            &lt;HostName&gt;www.inmobus.com&lt;/HostName&gt;
          &lt;/Device&gt;
        &lt;/Destination&gt;
        &lt;Payload&gt;
          &lt;Resource&gt;
            &lt;URL&gt;http://www.inmobus.com/wcm/assets/images/imagefileicon.gif&lt;/URL&gt;
            &lt;HTTPMethod&gt;GET&lt;/HTTPMethod&gt;
            &lt;UserAgent&gt;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)&lt;/UserAgent&gt;
            &lt;InboundSize&gt;941&lt;/InboundSize&gt;
            &lt;OutboundSize&gt;729&lt;/OutboundSize&gt;
            &lt;RequestTime&gt;1&lt;/RequestTime&gt;
            &lt;ResponseCode&gt;200&lt;/ResponseCode&gt;
            &lt;MimeType&gt;image/gif&lt;/MimeType&gt;
            &lt;Data Name=&quot;s-action&quot; Value=&quot;TCP_HIT&quot; /&gt;
            &lt;Data Name=&quot;cs-uri-scheme&quot; Value=&quot;http&quot; /&gt;
            &lt;Data Name=&quot;s-hierarchy&quot; Value=&quot;DIRECT&quot; /&gt;
            &lt;Data Name=&quot;sc-filter-result&quot; Value=&quot;PROXIED&quot; /&gt;
            &lt;Data Name=&quot;x-icap-error-code&quot; Value=&quot;none&quot; /&gt;
          &lt;/Resource&gt;
        &lt;/Payload&gt;
      &lt;/Receive&gt;
    &lt;/EventDetail&gt;
  &lt;/Event&gt;
&lt;/Events&gt;
</code></pre>
<p>for the given input</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;records xmlns=&quot;records:2&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;records:2 file://records-v2.0.xsd&quot; version=&quot;2.0&quot;&gt;
  &lt;record&gt;
    &lt;data name=&quot;date&quot; value=&quot;2005-05-04&quot; /&gt;
    &lt;data name=&quot;time&quot; value=&quot;17:16:12&quot; /&gt;
    &lt;data name=&quot;time-taken&quot; value=&quot;1&quot; /&gt;
    &lt;data name=&quot;c-ip&quot; value=&quot;45.110.2.82&quot; /&gt;
    &lt;data name=&quot;sc-status&quot; value=&quot;200&quot; /&gt;
    &lt;data name=&quot;s-action&quot; value=&quot;TCP_HIT&quot; /&gt;
    &lt;data name=&quot;sc-bytes&quot; value=&quot;941&quot; /&gt;
    &lt;data name=&quot;cs-bytes&quot; value=&quot;729&quot; /&gt;
    &lt;data name=&quot;cs-method&quot; value=&quot;GET&quot; /&gt;
    &lt;data name=&quot;cs-uri-scheme&quot; value=&quot;http&quot; /&gt;
    &lt;data name=&quot;cs-host&quot; value=&quot;www.inmobus.com&quot; /&gt;
    &lt;data name=&quot;cs-uri-path&quot; value=&quot;/wcm/assets/images/imagefileicon.gif&quot; /&gt;
    &lt;data name=&quot;cs-uri-query&quot; value=&quot;-&quot; /&gt;
    &lt;data name=&quot;cs-username&quot; value=&quot;george&quot; /&gt;
    &lt;data name=&quot;s-hierarchy&quot; value=&quot;DIRECT&quot; /&gt;
    &lt;data name=&quot;s-supplier-name&quot; value=&quot;38.112.92.20&quot; /&gt;
    &lt;data name=&quot;rs(Content-Type)&quot; value=&quot;image/gif&quot; /&gt;
    &lt;data name=&quot;cs(User-Agent)&quot; value=&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)&quot; /&gt;
    &lt;data name=&quot;sc-filter-result&quot; value=&quot;PROXIED&quot; /&gt;
    &lt;data name=&quot;sc-filter-category&quot; value=&quot;none&quot; /&gt;
    &lt;data name=&quot;x-virus-id&quot; value=&quot;-&quot; /&gt;
    &lt;data name=&quot;s-ip&quot; value=&quot;192.16.170.42&quot; /&gt;
    &lt;data name=&quot;s-sitename&quot; value=&quot;SG-HTTP-Service&quot; /&gt;
    &lt;data name=&quot;x-virus-details&quot; value=&quot;-&quot; /&gt;
    &lt;data name=&quot;x-icap-error-code&quot; value=&quot;none&quot; /&gt;
    &lt;data name=&quot;x-icap-error-details&quot; value=&quot;-&quot; /&gt;
  &lt;/record&gt;
&lt;/records&gt;
</code></pre>
<p>Do not forget to Save <img src="../resources/icons/save.png" alt="Save" title="Save"> the translation as we are complete.</p>
<h4 id="schema-validation">Schema Validation</h4>
<p>One last point, validating the use of the Stroom Event Logging Schema is performed in the <code>schemaFilter</code> component of the pipeline. Had our translation resulted in a malformed Event, this pipeline component displays any errors. In the screen below, we have purposely changed the <code>EventTime/TimeCreated</code> element to be <code>EventTime/TimeCreatd</code>. If one selects the <code>schemaFilter</code> component and then Refresh <img src="../resources/icons/stepRefresh.png" alt="stepRefresh" title="Refresh Current Step"> the current step, we will see that</p>
<ul>
<li>there is an error as indicated by a square <strong>Red</strong> box <img src="../resources/icons/errorIndicator.png" alt="errorIndicator" title="Error Indicator"> in the top right hand corner</li>
<li>there is a <strong>Red</strong> rectangle line indicator mark <img src="../resources/icons/errorLine.png" alt="errorLine" title="Error Line Indicator"> on the right hand side in the display slide bar</li>
<li>there is a <strong>Red</strong> error marker <img src="../resources/icons/errorMarker.png" alt="errorMarker" title="Error Marker"> on the left hand side</li>
</ul>
<p><img src="../resources/UI-FeedProcessing-47.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 6" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 6"></p>
<p>Hovering over the error marker <img src="../resources/icons/errorMarker.png" alt="errorMarker" title="Error Marker"> on the left hand side will bring a pop-up describing the error.</p>
<p><img src="../resources/UI-FeedProcessing-48.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 7" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 7"></p>
<p>At this point, close the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> stepping tab, acknowledging you do not want to save your errant changes</p>
<p><img src="../resources/UI-FeedProcessing-49.png" alt="Stroom UI Create Feed - Translation - Stepping XSLT Translation 8" title="Stroom UI Create Feed - Translation - Stepping XSLT Translation 8"></p>
<p>by pressing the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button.</p>
<h1 id="automated-processing">Automated Processing</h1>
<p>Now that we have authored our translation, we want to enable Stroom to automatically process streams of raw event log data as it arrives. We do this by configuring a <code>Processor</code> in the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>pipeline</code>.</p>
<h2 id="adding-a-pipeline-processor">Adding a Pipeline Processor</h2>
<p>Open the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>pipeline</code> by selecting it (<em>double left click</em>) in the <code>Explorer</code> display to show</p>
<p><img src="../resources/UI-FeedProcessing-50.png" alt="Stroom UI Enable Processing" title="Stroom UI Enable Processing"></p>
<p>To configure a Processor we select the <code>Processors</code> hyper-link of the <em>*BlueCoat-Proxy-V1.0-EVENTS</em> <code>Pipeline</code> tab to reveal</p>
<p><img src="../resources/UI-FeedProcessing-51.png" alt="Stroom UI Enable Processing - Processors table" title="Stroom UI Enable Processing - Processors table"></p>
<p>We add a Processor by pressing the add processor button <img src="../resources/icons/add.png" alt="Add Processor" title="Add Processor"> in the top left hand corner. At this you will be presented with an <code>Add Filter</code> configuration window.</p>
<p><img src="../resources/UI-FeedProcessing-52.png" alt="Stroom UI Enable Processing - Add filter 1" title="Stroom UI Enable Processing - Add Filter 1"></p>
<p>As we wish to create a Processor that will automatically process all <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> feed <code>Raw Events</code> we will select the BlueCoat-Proxy-V1.0-EVENTS <code>Feed</code> and Raw Event <code>Stream Type</code>.</p>
<p>To select the feed, we press the <code>Edit</code> button <img src="../resources/icons/edit.png" alt="Stroom UI Edit Feed Filter" title="Stroom UI EditButton">.  At this, the <code>Choose Feeds To Include And Exclude</code> configuration window is displayed.</p>
<p><img src="../resources/UI-FeedProcessing-53.png" alt="Stroom UI Enable Processing - Add filter 2" title="Stroom UI Enable Processing - Add Filter 2"></p>
<p>As we need to <code>Include</code> the BlueCoat-Proxy-V1.0-EVENTS <code>Feed</code> in our selection, press the <img src="../resources/icons/add.png" alt="Add" title="Add"> button in the <code>Include:</code> pane of the window to be presented with a <code>Choose Item</code> configuration window.</p>
<p><img src="../resources/UI-FeedProcessing-54.png" alt="Stroom UI Enable Processing - Add filter 3" title="Stroom UI Enable Processing - Add Filter 3"></p>
<p>Navigate to the <strong>Event Sources/Proxy/BlueCoat</strong> folder and select the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>Feed</code></p>
<p><img src="../resources/UI-FeedProcessing-55.png" alt="Stroom UI Enable Processing - Add filter 4" title="Stroom UI Enable Processing - Add Filter 4"></p>
<p>then press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button to select and see that the feed is included.</p>
<p><img src="../resources/UI-FeedProcessing-56.png" alt="Stroom UI Enable Processing - Add filter 5" title="Stroom UI Enable Processing - Add Filter 5"></p>
<p>Again press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button to close the <code>Choose Feeds To Include And Exclude</code> window to show that we have selected our feed in the <code>Feeds:</code> selection pane of the <code>Add Filter</code> configuration window.</p>
<p><img src="../resources/UI-FeedProcessing-57.png" alt="Stroom UI Enable Processing - Add filter 6" title="Stroom UI Enable Processing - Add Filter 6"></p>
<p>We now need to select our <code>Stream Type</code>. Press the <img src="../resources/icons/add.png" alt="Add" title="Add"> button in the <code>Stream Types:</code> pane of the window to be presented with a <code>Add Stream Type</code> window with a <code>Stream Type:</code> selection drop down.</p>
<p><img src="../resources/UI-FeedProcessing-58.png" alt="Stroom UI Enable Processing - Add filter 7" title="Stroom UI Enable Processing - Add Filter 7"></p>
<p>We select (<em>left click</em>) the drop down selection to display the types of Stream we can choose</p>
<p><img src="../resources/UI-FeedProcessing-59.png" alt="Stroom UI Enable Processing - Add filter 8" title="Stroom UI Enable Processing - Add Filter 8"></p>
<p>and as we are selecting <code>Raw Events</code> we select that item then press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button at which we see that our <code>Add Filter</code> configuration window displays</p>
<p><img src="../resources/UI-FeedProcessing-60.png" alt="Stroom UI Enable Processing - Add filter 9" title="Stroom UI Enable Processing - Add Filter 9">.</p>
<p>As we have selected our filter items, press the <img src="../resources/icons/buttonOk.png" alt="Stroom UI OkButton" title="Stroom UI OkButton"> button to display our configured Processors.</p>
<p><img src="../resources/UI-FeedProcessing-61.png" alt="Stroom UI Enable Processing - Configured Processors" title="Stroom UI Enable Processing - Configured Processors">.</p>
<p>We now see our display is divided into two panes. The Processors table pane at the top and the specific Processor pane below. In our case, our filter selection has left the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> <code>Filter</code> selected in the Processors table</p>
<p><img src="../resources/UI-FeedProcessing-62.png" alt="Stroom UI Enable Processing - Configured Processors - Selected Processor" title="Stroom UI Enable Processing - Configured Processors - Selected Processor">.</p>
<p>and the specific filter&apos;s details in the bottom pane.</p>
<p><img src="../resources/UI-FeedProcessing-63.png" alt="Stroom UI Enable Processing - Configured Processors - Selected Processor Detail" title="Stroom UI Enable Processing - Configured Processors - Selected Processor Detail">.</p>
<p>The column entries in the Processors Table pane describe</p>
<ul>
<li>Pipeline - the name of the Processor pipeline (<img src="../resources/icons/pipeline.png" alt="Pipeline" title="Pipeline">) or Processor filter (<img src="../resources/icons/filter.png" alt="Filter" title="Filter">)</li>
<li>Tracker Ms - the last time the tracker updated</li>
<li>Tracker % - the percentage of available streams completed</li>
<li>Last Poll Age - the last time the processor found new streams to process</li>
<li>Task Count - the number of processor tasks currently running</li>
<li>Priority - the queue scheduling priority of task submission to available stream processors</li>
<li>Streams - the number of streams that have been processed (includes currently running streams)</li>
<li>Events - ??</li>
<li>Status - the status of the processor. Normally empty if the number of stream is open-ended. If only are subset of streams were chosen (e.g. a time range in the filter) then the status will be <em>Complete</em></li>
<li>Enabled - check box to indicate the processor is enabled</li>
</ul>
<p>We now need only <code>Enable</code> both the pipeline Processor and the pipeline Filter for automatic processing to occur. We do this by selecting both check boxes in the <code>Enabled</code> column.</p>
<p><img src="../resources/UI-FeedProcessing-64.png" alt="Stroom UI Enable Processing - Configured Processors - Enable Processor" title="Stroom UI Enable Processing - Configured Processors - Enable Processor"></p>
<p>If we refresh our Processor table by pressing the <img src="../resources/icons/refresh.png" alt="Stroom UI Refresh" title="Stroom UI RefreshButton"> button in the top right hand corner, we will see that more table entries have been filled in.</p>
<p><img src="../resources/UI-FeedProcessing-65.png" alt="Stroom UI Enable Processing - Configured Processors - Enable Processor Result" title="Stroom UI Enable Processing - Configured Processors - Enable Processor Result"></p>
<p>We see that the tracker last updated at <em>2018-07-14T04:00:35.289Z</em>, the percentage complete is <em>100</em> (we only had one stream after all), the last time active streams were checked for was <em>2.3</em> minutes ago, there are no tasks running and that <em>1</em> stream has completed. Note that the <code>Status</code> column is blank as we have an <em>open ended</em> filter in that the processor will continue to select and process any new stream of <code>Raw Events</code> coming into the <strong>BlueCoat-Proxy-V1.0-EVENTS</strong> feed.</p>
<p>If we return to the <em>BlueCoat-Proxy-V1.0-EVENTS<strong> <code>Feed</code> tab, ensuring the </strong>Data*</em> hyper-link is selected and then refresh (<img src="../resources/icons/refresh.png" alt="Refresh" title="Refresh">) the top pane that holds the summary of the latest Feed streams</p>
<p><img src="../resources/UI-FeedProcessing-66.png" alt="Stroom UI Enable Processing - Configured Processors - Feed Display" title="Stroom UI Enable Processing - Configured Processors - Feed Display"></p>
<p>We see a new entry in the table. The columns display</p>
<ul>
<li>Created - The time the stream was created.</li>
<li>Type - The type of stream. Our new entry has a type of &apos;Events&apos; as we have processed our <code>Raw Events</code> data.</li>
<li>Feed - The name of the stream&apos;s feed</li>
<li>Pipeline - The name of the pipeline involved in the generation of the stream</li>
<li>Raw - The size in bytes of the raw stream data</li>
<li>Disk - The size in bytes of the raw stream data when stored in compressed form on the disk</li>
<li>Read - The number of records read by a pipeline</li>
<li>Write - The number of records (events) written by a pipeline. In this case the difference is that we did not generate events for the <code>Software</code> or <code>Version</code> records we read.</li>
<li>Fatal - The number of fatal errors the pipeline encountered when processing this stream</li>
<li>Error - The number of errors the pipeline encountered when processing this stream</li>
<li>Warn - The number of warnings the pipeline encountered when processing this stream</li>
<li>Info - The number of informational alerts the pipeline encountered when processing this stream</li>
<li>Retention - The retention period for this stream of data</li>
</ul>
<p>If we also refresh (<img src="../resources/icons/refresh.png" alt="Refresh" title="Refresh">) the specific feed pane (middle) we again see a new entry of the <code>Events</code> <em>Type</em></p>
<p><img src="../resources/UI-FeedProcessing-67.png" alt="Stroom UI Enable Processing - Configured Processors - Specific Feed Display" title="Stroom UI Enable Processing - Configured Processors - Specific Feed Display"></p>
<p>If we select (<em>left click</em>) on the <code>Events</code> <em>Type</em> in either pane, we will see that the data pane displays the first event in the <em>GCHQ Stroom Event Logging XML Schema</em> form.</p>
<p><img src="../resources/UI-FeedProcessing-68.png" alt="Stroom UI Enable Processing - Configured Processors - Event Display" title="Stroom UI Enable Processing - Configured Processors - Event Display"></p>
<p>We can now send a file of BlueCoat Proxy logs to our Stroom instance from a Linux host using <em>curl</em> command and see how Stroom will automatically processes the file. Use the command</p>
<pre><code class="lang-bash">curl -k --data-binary @sampleBluecoat.log https://stroomp.strmdev00.org/stroom/datafeed -H&quot;Feed:BlueCoat-Proxy-V1.0-EVENTS&quot; -H&quot;Environment:Development&quot;  -H&quot;LogFileName:sampleBluecoat.log&quot; -H&quot;MyHost:\&quot;somenode.strmdev00.org\&quot;&quot; -H&quot;MyIPaddress:\&quot;192.168.2.220 192.168.122.1\&quot;&quot; -H&quot;System:Site http://log-sharing.dreamhosters.com/ Bluecoat Logs&quot; -H&quot;Version:V1.0&quot;
</code></pre>
<p>After Stroom&apos;s Proxy aggregation has occurred, we will see that the new file posted via <em>curl</em> has been loaded into Stroom as per</p>
<p><img src="../resources/UI-FeedProcessing-69.png" alt="Stroom UI Enable Processing - Configured Processors - New Posted Stream" title="Stroom UI Enable Processing - Configured Processors - New Posted Stream"></p>
<p>and this new <em>Raw Event</em> stream is automatically processed a few seconds later as per</p>
<p><img src="../resources/UI-FeedProcessing-70.png" alt="Stroom UI Enable Processing - Configured Processors - New Posted Stream Processed" title="Stroom UI Enable Processing - Configured Processors - New Posted Stream Processed"></p>
<p>We note that since we have used the same sample file again, the Stream sizes and record counts are the same.</p>
<p>If we switch to the <code>Processors</code> tab of the pipeline we see that the Tracker timestamp has changed and the number of Streams processed has increased.</p>
<p><img src="../resources/UI-FeedProcessing-71.png" alt="Stroom UI Enable Processing - Configured Processors - New Posted Stream Processors" title="Stroom UI Enable Processing - Configured Processors - New Posted Stream Processors"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="../../proxy/install.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Installing Stroom proxy">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Event Processing","level":"4.5.1","depth":2,"next":{"title":"Installing Stroom proxy","level":"5.1","depth":1,"path":"proxy/install.md","ref":"proxy/install.md","articles":[]},"previous":{"title":"Event Feeds","level":"4.5","depth":1,"ref":"","articles":[{"title":"Event Processing","level":"4.5.1","depth":2,"path":"HOWTOs/EventFeeds/ProcessingHowTo.md","ref":"HOWTOs/EventFeeds/ProcessingHowTo.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/gchq/stroom-docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Stroom Docs","gitbook":"3.x.x"},"file":{"path":"HOWTOs/EventFeeds/ProcessingHowTo.md","mtime":"2019-05-13T09:32:55.684Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-13T09:34:10.933Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

